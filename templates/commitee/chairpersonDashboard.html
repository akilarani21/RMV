<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Committee Dashboard</title>
  <script src="https://cdn.tailwindcss.com/3.4.16"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4F46E5',
            secondary: '#6B7280'
          },
          borderRadius: {
            'none': '0px',
            'sm': '4px',
            DEFAULT: '8px',
            'md': '12px',
            'lg': '16px',
            'xl': '20px',
            '2xl': '24px',
            '3xl': '32px',
            'full': '9999px',
            'button': '8px'
          }
        }
      }
    }
  </script>
  <style>
    :where([class^="ri-"])::before {
      content: "\f3c2";
    }

    .sidebar-link.active {
      background-color: rgba(79, 70, 229, 0.1);
      color: #4F46E5;
    }

    .status-filter.active {
      background-color: #4F46E5;
      color: white;
    }

    /* Responsive table styles */
    .table-container {
      width: 100%;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      margin-bottom: 1rem;
      background: white;
      border-radius: 0.5rem;
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
    }

    .table-container table {
      margin-bottom: 0;
      white-space: nowrap;
    }

    /* Responsive filters */
    .filters-scroll {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      padding-bottom: 0.5rem;
      margin-bottom: -0.5rem;
    }

    .filters-container {
      display: flex;
      gap: 0.5rem;
      min-width: max-content;
    }

    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
        position: fixed;
        z-index: 50;
        transition: transform 0.3s ease-in-out;
      }

      .sidebar.show {
        transform: translateX(0);
      }

      .main-content {
        margin-left: 0 !important;
        width: 100% !important;
      }

      .table-container {
        margin: 0 -1rem;
        border-radius: 0;
      }

      .pagination-container {
        flex-direction: column;
        gap: 1rem;
        align-items: stretch !important;
      }

      .pagination-container>div {
        justify-content: center;
      }
    }
  </style>
</head>

<body class="bg-gray-50 font-['Inter']">
  <div class="flex min-h-screen">
    <aside id="sidebar"
      class="fixed top-0 left-0 z-40 w-64 h-screen transition-transform bg-white border-r border-gray-200">
      <div class="flex flex-col h-full">
        <div class="p-4 border-b">
          <div class="flex items-center gap-3 cursor-pointer" onclick="navigateToProfile()">
            <div class="w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center">
              <i class="ri-user-line text-xl"></i>
            </div>
            <div>
              <h3 class="font-semibold text-gray-900">Dr. Emily Thompson</h3>
              <p class="text-sm text-gray-500">Committee Chairperson</p>
            </div>
          </div>
        </div>
        <nav class="flex-1 p-4 space-y-2">
          <a href="#" class="sidebar-link active flex items-center gap-3 px-4 py-2 text-sm rounded-lg"
            onclick="showMyComplaints()">
            <i class="ri-file-list-line w-5 h-5 flex items-center justify-center"></i>
            My Complaints
          </a>
          <a href="#"
            class="sidebar-link flex items-center gap-3 px-4 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-50"
            onclick="showMyInterviews()">
            <i class="ri-calendar-line w-5 h-5 flex items-center justify-center"></i>
            My Interviews
          </a>
          <a href="#"
            class="sidebar-link flex items-center gap-3 px-4 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-50"
            onclick="showComplaintsList()">
            <i class="ri-list-check-line w-5 h-5 flex items-center justify-center"></i>
            Complaints List
          </a>
          <a href="#"
            class="sidebar-link flex items-center gap-3 px-4 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-50"
            onclick="showInterviewList()">
            <i class="ri-team-line w-5 h-5 flex items-center justify-center"></i>
            Interview List
          </a>
          <a href="#"
            class="sidebar-link flex items-center gap-3 px-4 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-50"
            onclick="showResolvedCases()">
            <i class="ri-checkbox-circle-line w-5 h-5 flex items-center justify-center"></i>
            Resolved Cases
          </a>
          <a href="#"
            class="sidebar-link flex items-center gap-3 px-4 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-50"
            onclick="showReappealCases()">
            <i class="ri-refresh-line w-5 h-5 flex items-center justify-center"></i>
            Reappeal Cases
          </a>
        </nav>
        <div class="p-4 space-y-3">
          <button onclick="showAddComplaintModal()"
            class="w-full flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-button">
            <i class="ri-add-line w-5 h-5 flex items-center justify-center"></i>
            Add New Complaint
          </button>
          <button onclick="showScheduleInterviewModal()"
            class="w-full flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-button">
            <i class="ri-calendar-2-line w-5 h-5 flex items-center justify-center"></i>
            Schedule Interview
          </button>
        </div>
      </div>
    </aside>
    <div class="flex-1 ml-64 main-content">
      <header class="bg-white border-b border-gray-200">
        <div class="px-6 py-4">
          <div class="flex items-center justify-between">
            <h1 id="pageTitle" class="text-xl font-semibold text-gray-900">My Complaints</h1>
            <button id="menuButton" class="md:hidden" onclick="toggleSidebar()">
              <i class="ri-menu-line text-xl"></i>
            </button>
          </div>
          <nav id="complaintsFilters" class="overflow-x-auto -mb-px">
            <div class="flex gap-2 min-w-max p-1">
              <button
                class="status-filter active px-4 py-2 text-sm font-medium rounded-full whitespace-nowrap">All</button>
              <button
                class="status-filter px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-full whitespace-nowrap">Scheduled</button>
              <button
                class="status-filter px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-full whitespace-nowrap">In
                Progress</button>
              <button
                class="status-filter px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-full whitespace-nowrap">Completed</button>
              <button
                class="status-filter px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-full whitespace-nowrap">Resolved</button>
              <button
                class="status-filter px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-full whitespace-nowrap">Cancelled</button>
            </div>
          </nav>
        </div>
      </header>
      <main class="p-6">
        <div id="complaintsTable" class="table-container bg-white rounded-lg shadow">
          <div class="overflow-x-auto">
            <table class="w-full text-sm text-left">
              <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                <tr>
                  <th class="px-6 py-3">Complaint ID</th>
                  <th class="px-6 py-3">Complaint Date</th>
                  <th class="px-6 py-3">Subject</th>
                  <th class="px-6 py-3">Status</th>
                  <th class="px-6 py-3">Actions</th>
                </tr>
              </thead>
              <tbody id="complaintsTableBody"></tbody>
            </table>
          </div>
          <div class="px-6 py-4 flex items-center justify-between border-t">
            <div class="flex items-center gap-2">
              <span class="text-sm text-gray-700">Show</span>
              <select class="text-sm border-gray-300 rounded-md" onchange="updateRowsPerPage(this.value)">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
              </select>
              <span class="text-sm text-gray-700">entries</span>
            </div>
            <div class="flex items-center gap-2">
              <button id="prevPageBtn" class="px-3 py-1 text-sm text-gray-400 rounded-md cursor-not-allowed"
                onclick="previousPage()" disabled>Previous</button>
              <span id="currentPage" class="px-3 py-1 text-sm text-white bg-primary rounded-md">1</span>
              <button id="nextPageBtn" class="px-3 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded-md"
                onclick="nextPage()">Next</button>
            </div>
          </div>
        </div>
        <div id="resolvedCasesTable" class="table-container bg-white rounded-lg shadow hidden">
          <div class="overflow-x-auto">
            <table class="w-full text-sm text-left">
              <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                <tr>
                  <th class="px-6 py-3">Complaint ID</th>
                  <th class="px-6 py-3">Resolved Date</th>
                  <th class="px-6 py-3">Subject</th>
                  <th class="px-6 py-3">Action Taken</th>
                  <th class="px-6 py-3">Case Summary</th>
                  <th class="px-6 py-3">Actions</th>
                </tr>
              </thead>
              <tbody id="resolvedCasesTableBody"></tbody>
            </table>
          </div>
          <div class="px-6 py-4 flex items-center justify-between border-t">
            <div class="flex items-center gap-2">
              <span class="text-sm text-gray-700">Show</span>
              <select class="text-sm border-gray-300 rounded-md" onchange="updateResolvedRowsPerPage(this.value)">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
              </select>
              <span class="text-sm text-gray-700">entries</span>
            </div>
            <div class="flex items-center gap-2">
              <button id="resolvedPrevPageBtn" class="px-3 py-1 text-sm text-gray-400 rounded-md cursor-not-allowed"
                onclick="previousResolvedPage()" disabled>Previous</button>
              <span id="resolvedCurrentPage" class="px-3 py-1 text-sm text-white bg-primary rounded-md">1</span>
              <button id="resolvedNextPageBtn" class="px-3 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded-md"
                onclick="nextResolvedPage()">Next</button>
            </div>
          </div>
        </div>
        <div id="reappealCasesTable" class="table-container bg-white rounded-lg shadow hidden">
          <div class="overflow-x-auto">
            <table class="w-full text-sm text-left">
              <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                <tr>
                  <th class="px-6 py-3">Complaint ID</th>
                  <th class="px-6 py-3">Resolved Date</th>
                  <th class="px-6 py-3">Case Summary</th>
                  <th class="px-6 py-3">Reappeal Date</th>
                  <th class="px-6 py-3">Reason for Reappeal</th>
                  <th class="px-6 py-3">Actions</th>
                </tr>
              </thead>
              <tbody id="reappealCasesTableBody"></tbody>
            </table>
          </div>
          <div class="px-6 py-4 flex items-center justify-between border-t">
            <div class="flex items-center gap-2">
              <span class="text-sm text-gray-700">Show</span>
              <select class="text-sm border-gray-300 rounded-md" onchange="updateReappealRowsPerPage(this.value)">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
              </select>
              <span class="text-sm text-gray-700">entries</span>
            </div>
            <div class="flex items-center gap-2">
              <button id="reappealPrevPageBtn" class="px-3 py-1 text-sm text-gray-400 rounded-md cursor-not-allowed"
                onclick="previousReappealPage()" disabled>Previous</button>
              <span id="reappealCurrentPage" class="px-3 py-1 text-sm text-white bg-primary rounded-md">1</span>
              <button id="reappealNextPageBtn" class="px-3 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded-md"
                onclick="nextReappealPage()">Next</button>
            </div>
          </div>
        </div>
        <div id="interviewListTable" class="table-container bg-white rounded-lg shadow hidden">
          <div class="overflow-x-auto">
            <table class="w-full text-sm text-left">
              <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                <tr>
                  <th class="px-6 py-3">Complaint ID</th>
                  <th class="px-6 py-3">Interview Date</th>
                  <th class="px-6 py-3">Interview Mode</th>
                  <th class="px-6 py-3">Status</th>
                  <th class="px-6 py-3">Actions</th>
                </tr>
              </thead>
              <tbody id="interviewListTableBody"></tbody>
            </table>
          </div>
          <div class="px-6 py-4 flex items-center justify-between border-t">
            <div class="flex items-center gap-2">
              <span class="text-sm text-gray-700">Show</span>
              <select class="text-sm border-gray-300 rounded-md" onchange="updateInterviewRowsPerPage(this.value)">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
              </select>
              <span class="text-sm text-gray-700">entries</span>
            </div>
            <div class="flex items-center gap-2">
              <button id="interviewPrevPageBtn" class="px-3 py-1 text-sm text-gray-400 rounded-md cursor-not-allowed"
                onclick="previousInterviewPage()" disabled>Previous</button>
              <span id="interviewCurrentPage" class="px-3 py-1 text-sm text-white bg-primary rounded-md">1</span>
              <button id="interviewNextPageBtn" class="px-3 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded-md"
                onclick="nextInterviewPage()">Next</button>
            </div>
          </div>
        </div>
        <div id="myInterviewsTable" class="table-container bg-white rounded-lg shadow hidden">
          <div class="p-4 border-b">
            <div class="flex flex-wrap gap-4">
              <div class="flex-1 min-w-[200px]">
                <label class="block text-xs font-medium text-gray-700 mb-1">Date Range</label>
                <div class="flex items-center gap-2">
                  <input type="date" id="startDateFilter"
                    class="w-full text-sm border border-gray-300 rounded-md px-3 py-2" onchange="filterMyInterviews()">
                  <span class="text-gray-500">to</span>
                  <input type="date" id="endDateFilter"
                    class="w-full text-sm border border-gray-300 rounded-md px-3 py-2" onchange="filterMyInterviews()">
                </div>
              </div>
              <div class="flex-1 min-w-[200px]">
                <label class="block text-xs font-medium text-gray-700 mb-1">Status</label>
                <select id="interviewStatusFilter" class="w-full text-sm border border-gray-300 rounded-md px-3 py-2"
                  onchange="filterMyInterviews()">
                  <option value="">All Statuses</option>
                  <option value="Scheduled">Scheduled</option>
                  <option value="Attended">Attended</option>
                  <option value="Not Attended">Not Attended</option>
                </select>
              </div>
              <div class="flex-1 min-w-[200px]">
                <label class="block text-xs font-medium text-gray-700 mb-1">Mode</label>
                <select id="interviewModeFilter" class="w-full text-sm border border-gray-300 rounded-md px-3 py-2"
                  onchange="filterMyInterviews()">
                  <option value="">All Modes</option>
                  <option value="In-person">In-person</option>
                  <option value="Virtual">Virtual</option>
                </select>
              </div>
              <div class="flex-1 min-w-[200px]">
                <label class="block text-xs font-medium text-gray-700 mb-1">Search</label>
                <div class="relative">
                  <input type="text" id="interviewSearchInput"
                    class="w-full text-sm border border-gray-300 rounded-md pl-9 pr-3 py-2"
                    placeholder="Search interviews..." onkeyup="filterMyInterviews()">
                  <i
                    class="ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4 flex items-center justify-center"></i>
                </div>
              </div>
            </div>
          </div>
          <div class="overflow-x-auto">
            <table class="w-full text-sm text-left">
              <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                <tr>
                  <th class="px-6 py-3">Interview Date/Time</th>
                  <th class="px-6 py-3">Complaint ID</th>
                  <th class="px-6 py-3">Participants</th>
                  <th class="px-6 py-3">Location</th>
                  <th class="px-6 py-3">Mode</th>
                  <th class="px-6 py-3">Status</th>
                  <th class="px-6 py-3">Actions</th>
                </tr>
              </thead>
              <tbody id="myInterviewsTableBody"></tbody>
            </table>
          </div>
          <div class="px-6 py-4 flex items-center justify-between border-t">
            <div class="flex items-center gap-2">
              <span class="text-sm text-gray-700">Show</span>
              <select class="text-sm border-gray-300 rounded-md" onchange="updateMyInterviewsRowsPerPage(this.value)">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
              </select>
              <span class="text-sm text-gray-700">entries</span>
            </div>
            <div class="flex items-center gap-2">
              <button id="myInterviewsPrevPageBtn" class="px-3 py-1 text-sm text-gray-400 rounded-md cursor-not-allowed"
                onclick="previousMyInterviewsPage()" disabled>Previous</button>
              <span id="myInterviewsCurrentPage" class="px-3 py-1 text-sm text-white bg-primary rounded-md">1</span>
              <button id="myInterviewsNextPageBtn" class="px-3 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded-md"
                onclick="nextMyInterviewsPage()">Next</button>
            </div>
          </div>
        </div>
        <div id="complaintsListTable" class="table-container bg-white rounded-lg shadow hidden">
          <div class="p-4 border-b">
            <div class="flex flex-wrap gap-4">
              <div class="flex-1 min-w-[200px]">
                <label class="block text-xs font-medium text-gray-700 mb-1">Committee Member</label>
                <select id="memberFilter" class="w-full text-sm border border-gray-300 rounded-md px-3 py-2"
                  onchange="filterComplaintsList()">
                  <option value="">All Members</option>
                  <option value="Dr. Emily Thompson">Dr. Emily Thompson</option>
                  <option value="Dr. Michael Chen">Dr. Michael Chen</option>
                  <option value="Prof. Sarah Williams">Prof. Sarah Williams</option>
                  <option value="Prof. James Rodriguez">Prof. James Rodriguez</option>
                  <option value="Dr. Lisa Johnson">Dr. Lisa Johnson</option>
                </select>
              </div>
              <div class="flex-1 min-w-[200px]">
                <label class="block text-xs font-medium text-gray-700 mb-1">Department</label>
                <select id="departmentFilter" class="w-full text-sm border border-gray-300 rounded-md px-3 py-2"
                  onchange="filterComplaintsList()">
                  <option value="">All Departments</option>
                  <option value="Computer Science">Computer Science</option>
                  <option value="Biology">Biology</option>
                  <option value="Physics">Physics</option>
                  <option value="Economics">Economics</option>
                  <option value="Student Affairs">Student Affairs</option>
                </select>
              </div>
              <div class="flex-1 min-w-[200px]">
                <label class="block text-xs font-medium text-gray-700 mb-1">Status</label>
                <select id="statusFilterList" class="w-full text-sm border border-gray-300 rounded-md px-3 py-2"
                  onchange="filterComplaintsList()">
                  <option value="">All Statuses</option>
                  <option value="In Progress">In Progress</option>
                  <option value="Scheduled">Scheduled</option>
                  <option value="Completed">Completed</option>
                  <option value="Resolved">Resolved</option>
                  <option value="Cancelled">Cancelled</option>
                </select>
              </div>
              <div class="flex-1 min-w-[200px]">
                <label class="block text-xs font-medium text-gray-700 mb-1">Search</label>
                <div class="relative">
                  <input type="text" id="searchInput"
                    class="w-full text-sm border border-gray-300 rounded-md pl-9 pr-3 py-2"
                    placeholder="Search complaints..." onkeyup="filterComplaintsList()">
                  <i
                    class="ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4 flex items-center justify-center"></i>
                </div>
              </div>
            </div>
          </div>
          <div class="overflow-x-auto">
            <table class="w-full text-sm text-left">
              <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Complaint
                    ID</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Submission
                    Date</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Complainant
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions
                  </th>
                </tr>
              </thead>
              <tbody id="complaintsListTableBody"></tbody>
            </table>
          </div>
          <div class="px-6 py-4 flex items-center justify-between border-t">
            <div class="flex items-center gap-2">
              <span class="text-sm text-gray-700">Show</span>
              <select class="text-sm border-gray-300 rounded-md" onchange="updateComplaintsListRowsPerPage(this.value)">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
              </select>
              <span class="text-sm text-gray-700">entries</span>
            </div>
            <div class="flex items-center gap-2">
              <button id="complaintsListPrevPageBtn"
                class="px-3 py-1 text-sm text-gray-400 rounded-md cursor-not-allowed"
                onclick="previousComplaintsListPage()" disabled>Previous</button>
              <span id="complaintsListCurrentPage" class="px-3 py-1 text-sm text-white bg-primary rounded-md">1</span>
              <button id="complaintsListNextPageBtn"
                class="px-3 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded-md"
                onclick="nextComplaintsListPage()">Next</button>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>
  <div id="addComplaintModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded-lg w-full max-w-md p-6">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold">Add New Complaint</h3>
        <button onclick="hideAddComplaintModal()" class="text-gray-500 hover:text-gray-700">
          <i class="ri-close-line text-xl"></i>
        </button>
      </div>
      <form id="complaintForm" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Subject</label>
          <input type="text" class="w-full px-3 py-2 border rounded-md" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
          <textarea class="w-full px-3 py-2 border rounded-md" rows="4" required></textarea>
        </div>
        <div class="flex justify-end gap-3">
          <button type="button" onclick="hideAddComplaintModal()"
            class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-button">Cancel</button>
          <button type="submit"
            class="px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-button">Submit</button>
        </div>
      </form>
    </div>
  </div>
  <div id="scheduleInterviewModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded-lg w-full max-w-md p-6">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold">Schedule Interview</h3>
        <button onclick="hideScheduleInterviewModal()" class="text-gray-500 hover:text-gray-700">
          <i class="ri-close-line text-xl"></i>
        </button>
      </div>
      <form id="interviewForm" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Complaint ID</label>
          <select id="complaintIdSelect" class="w-full px-3 py-2 border rounded-md" required>
            <option value="">Select Complaint</option>
            <option value="CMP-2025-001">CMP-2025-001</option>
            <option value="CMP-2025-002">CMP-2025-002</option>
            <option value="CMP-2025-009">CMP-2025-009</option>
            <option value="CMP-2025-010">CMP-2025-010</option>
            <option value="CMP-2025-014">CMP-2025-014</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
          <input type="date" id="interviewDate" class="w-full px-3 py-2 border rounded-md" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Time</label>
          <input type="time" id="interviewTime" class="w-full px-3 py-2 border rounded-md" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Mode</label>
          <select id="interviewMode" class="w-full px-3 py-2 border rounded-md" required>
            <option value="In-person">In-person</option>
            <option value="Virtual">Virtual</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
          <input type="text" id="interviewLocation" class="w-full px-3 py-2 border rounded-md"
            placeholder="Enter location or meeting link" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Participants</label>
          <input type="text" id="interviewParticipants" class="w-full px-3 py-2 border rounded-md"
            placeholder="Enter participants" required>
        </div>
        <div class="flex justify-end gap-3">
          <button type="button" onclick="hideScheduleInterviewModal()"
            class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-button whitespace-nowrap">Cancel</button>
          <button type="submit"
            class="px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-button whitespace-nowrap">Schedule</button>
        </div>
      </form>
    </div>
  </div>
  <div id="editInterviewModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded-lg w-full max-w-md p-6">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold">Edit Interview</h3>
        <button onclick="hideEditInterviewModal()" class="text-gray-500 hover:text-gray-700">
          <i class="ri-close-line text-xl"></i>
        </button>
      </div>
      <form id="editInterviewForm" class="space-y-4">
        <input type="hidden" id="editInterviewId">
        <input type="hidden" id="editInterviewOriginalDate">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Complaint ID</label>
          <input type="text" id="editComplaintId" class="w-full px-3 py-2 border rounded-md bg-gray-100" readonly>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
          <input type="date" id="editInterviewDate" class="w-full px-3 py-2 border rounded-md" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Time</label>
          <input type="time" id="editInterviewTime" class="w-full px-3 py-2 border rounded-md" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Mode</label>
          <select id="editInterviewMode" class="w-full px-3 py-2 border rounded-md" required>
            <option value="In-person">In-person</option>
            <option value="Virtual">Virtual</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
          <input type="text" id="editInterviewLocation" class="w-full px-3 py-2 border rounded-md"
            placeholder="Enter location or meeting link" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Participants</label>
          <input type="text" id="editInterviewParticipants" class="w-full px-3 py-2 border rounded-md"
            placeholder="Enter participants" required>
        </div>
        <div class="flex justify-end gap-3">
          <button type="button" onclick="hideEditInterviewModal()"
            class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-button whitespace-nowrap">Cancel</button>
          <button type="submit"
            class="px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-button whitespace-nowrap">Save
            Changes</button>
        </div>
      </form>
    </div>
  </div>
  <div id="cancelInterviewModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded-lg w-full max-w-md p-6">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold">Cancel Interview</h3>
        <button onclick="hideCancelInterviewModal()" class="text-gray-500 hover:text-gray-700">
          <i class="ri-close-line text-xl w-5 h-5 flex items-center justify-center"></i>
        </button>
      </div>
      <div class="mb-4">
        <p class="text-gray-700">Are you sure you want to cancel this interview?</p>
        <p class="mt-2 font-medium">Complaint ID: <span id="cancelInterviewComplaintId" class="text-primary"></span></p>
        <p class="mt-1">Date: <span id="cancelInterviewDate"></span></p>
        <input type="hidden" id="interviewIdToCancel">
        <input type="hidden" id="interviewDateToCancel">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Reason for Cancellation</label>
        <textarea id="cancellationReason" class="w-full px-3 py-2 border rounded-md" rows="3"
          placeholder="Please provide a reason for cancellation..." required></textarea>
      </div>
      <div class="flex justify-end gap-3 mt-6">
        <button type="button" onclick="hideCancelInterviewModal()"
          class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-button whitespace-nowrap">Back</button>
        <button type="button" onclick="confirmCancelInterview()"
          class="px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-button whitespace-nowrap">Cancel
          Interview</button>
      </div>
    </div>
  </div>
  <div id="deleteConfirmationModal"
    class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded-lg w-full max-w-md p-6">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold">Delete Confirmation</h3>
        <button onclick="hideDeleteConfirmation()" class="text-gray-500 hover:text-gray-700">
          <i class="ri-close-line text-xl"></i>
        </button>
      </div>
      <div class="mb-6">
        <p class="text-gray-700">Are you sure you want to delete this complaint?</p>
        <p class="mt-2 font-medium">Complaint ID: <span id="deleteComplaintId" class="text-primary"></span></p>
        <input type="hidden" id="complaintIdToDelete">
      </div>
      <div class="flex justify-end gap-3">
        <button type="button" onclick="hideDeleteConfirmation()"
          class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-button whitespace-nowrap">Cancel</button>
        <button type="button" onclick="deleteComplaint()"
          class="px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-button whitespace-nowrap">Delete</button>
      </div>
    </div>
  </div>
  <div id="editComplaintModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded-lg w-full max-w-md p-6">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold">Edit Complaint</h3>
        <button onclick="hideEditModal()" class="text-gray-500 hover:text-gray-700">
          <i class="ri-close-line text-xl"></i>
        </button>
      </div>
      <form id="editComplaintForm" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Complaint ID</label>
          <input type="text" id="editComplaintId" class="w-full px-3 py-2 border rounded-md bg-gray-100" readonly>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Subject</label>
          <input type="text" id="editComplaintSubject" class="w-full px-3 py-2 border rounded-md" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
          <textarea id="editComplaintDescription" class="w-full px-3 py-2 border rounded-md" rows="4"
            required></textarea>
        </div>
        <div class="flex justify-end gap-3">
          <button type="button" onclick="hideEditModal()"
            class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-button whitespace-nowrap">Cancel</button>
          <button type="submit"
            class="px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-button whitespace-nowrap">Save
            Changes</button>
        </div>
      </form>
    </div>
  </div>
  <div id="caseSummaryModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg w-full max-w-2xl p-6">
      <div class="flex items-center justify-between mb-4 border-b pb-3">
        <h3 class="text-lg font-semibold">Case Summary</h3>
        <button onclick="hideCaseSummaryModal()" class="text-gray-500 hover:text-gray-700">
          <i class="ri-close-line text-xl w-5 h-5 flex items-center justify-center"></i>
        </button>
      </div>
      <div class="mb-4">
        <div class="flex items-center gap-2 mb-3">
          <div class="w-8 h-8 flex items-center justify-center bg-primary/10 text-primary rounded-full">
            <i class="ri-file-text-line"></i>
          </div>
          <h4 id="summaryComplaintId" class="font-medium"></h4>
        </div>
        <div class="flex items-center gap-2 mb-3">
          <span class="text-sm font-medium text-gray-500">Resolution Date:</span>
          <span id="summaryResolvedDate" class="text-sm"></span>
        </div>
        <div class="flex items-center gap-2 mb-3">
          <span class="text-sm font-medium text-gray-500">Action Taken:</span>
          <span id="summaryActionTaken"
            class="text-sm font-medium px-2 py-1 bg-purple-100 text-purple-800 rounded-full"></span>
        </div>
      </div>
      <div class="border-t pt-3">
        <h4 class="text-sm font-medium text-gray-700 mb-2">Summary</h4>
        <div id="summaryCaseContent" class="text-gray-700 bg-gray-50 p-4 rounded-md"></div>
      </div>
      <div class="mt-6 flex justify-end">
        <button onclick="downloadCaseSummary()"
          class="flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-button whitespace-nowrap">
          <i class="ri-download-line w-5 h-5 flex items-center justify-center"></i>
          Download Summary
        </button>
      </div>
    </div>
  </div>
  <div id="assignComplaintModal"
    class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg w-full max-w-md p-6">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold">Assign Committee Members</h3>
        <button onclick="hideAssignComplaintModal()" class="text-gray-500 hover:text-gray-700">
          <i class="ri-close-line text-xl w-5 h-5 flex items-center justify-center"></i>
        </button>
      </div>
      <div class="mb-4">
        <p class="text-gray-700">Assign committee members to review this complaint:</p>
        <p class="mt-2 font-medium">Complaint ID: <span id="assignComplaintId" class="text-primary"></span></p>
        <input type="hidden" id="complaintIdToAssign">
      </div>
      <form id="assignmentForm" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Select Committee Members</label>
          <select id="committeeMembers" multiple class="w-full px-3 py-2 border rounded-md" size="4">
            <option value="Dr. Emily Thompson">Dr. Emily Thompson</option>
            <option value="Dr. Michael Chen">Dr. Michael Chen</option>
            <option value="Prof. Sarah Williams">Prof. Sarah Williams</option>
            <option value="Prof. James Rodriguez">Prof. James Rodriguez</option>
            <option value="Dr. Lisa Johnson">Dr. Lisa Johnson</option>
            <option value="Dr. Robert Davis">Dr. Robert Davis</option>
            <option value="Prof. Maria Garcia">Prof. Maria Garcia</option>
          </select>
          <p class="text-xs text-gray-500 mt-1">Hold Ctrl/Cmd to select multiple members</p>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Primary Reviewer</label>
          <select id="primaryReviewer" class="w-full px-3 py-2 border rounded-md">
            <option value="">Select Primary Reviewer</option>
            <option value="Dr. Emily Thompson">Dr. Emily Thompson</option>
            <option value="Dr. Michael Chen">Dr. Michael Chen</option>
            <option value="Prof. Sarah Williams">Prof. Sarah Williams</option>
            <option value="Prof. James Rodriguez">Prof. James Rodriguez</option>
            <option value="Dr. Lisa Johnson">Dr. Lisa Johnson</option>
            <option value="Dr. Robert Davis">Dr. Robert Davis</option>
            <option value="Prof. Maria Garcia">Prof. Maria Garcia</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Assignment Comments</label>
          <textarea id="assignmentComments" class="w-full px-3 py-2 border rounded-md" rows="3"
            placeholder="Add any specific instructions or context for the committee members..."></textarea>
        </div>
        <div id="assignmentError" class="hidden text-red-600 text-sm">
          Please select at least one committee member.
        </div>
        <div class="flex justify-end gap-3 mt-6">
          <button type="button" onclick="hideAssignComplaintModal()"
            class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-button whitespace-nowrap">Cancel</button>
          <button type="button" onclick="confirmAssignment()"
            class="px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-button whitespace-nowrap">Confirm
            Assignment</button>
        </div>
      </form>
    </div>
  </div>
  <div id="attachDocumentModal"
    class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg w-full max-w-md p-6 max-h-[90vh] overflow-y-auto">
      <div class="flex items-center justify-between mb-4 sticky top-0 bg-white pb-2">
        <h3 class="text-lg font-semibold">Attach Document</h3>
        <button onclick="hideAttachDocumentModal()"
          class="text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100">
          <i class="ri-close-line text-xl w-5 h-5 flex items-center justify-center"></i>
        </button>
      </div>
      <div class="mb-4">
        <div class="flex items-center gap-2 text-gray-700">
          <i class="ri-attachment-2 w-5 h-5 flex items-center justify-center text-primary"></i>
          <p>Upload a document to attach to this complaint:</p>
        </div>
        <p class="mt-2 font-medium">Complaint ID: <span id="attachDocumentComplaintId" class="text-primary"></span></p>
      </div>
      <form id="attachDocumentForm" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Document Title <span
              class="text-red-500">*</span></label>
          <input type="text" id="documentTitle"
            class="w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none transition-all duration-200"
            placeholder="Enter document title" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Document Type <span
              class="text-red-500">*</span></label>
          <select id="documentType"
            class="w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none transition-all duration-200 pr-8"
            required>
            <option value="">Select document type</option>
            <option value="pdf">PDF Document</option>
            <option value="docx">Word Document</option>
            <option value="xlsx">Excel Spreadsheet</option>
            <option value="jpg">Image (JPG)</option>
            <option value="png">Image (PNG)</option>
            <option value="pptx">PowerPoint Presentation</option>
            <option value="txt">Text Document</option>
            <option value="zip">ZIP Archive</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Upload File <span
              class="text-red-500">*</span></label>
          <div
            class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md transition-all duration-200 hover:border-gray-400">
            <div class="space-y-1 text-center">
              <i
                class="ri-upload-cloud-line mx-auto text-gray-400 text-3xl w-12 h-12 flex items-center justify-center"></i>
              <div class="flex flex-wrap justify-center text-sm text-gray-600">
                <label for="file-upload"
                  class="relative cursor-pointer bg-white rounded-md font-medium text-primary hover:text-primary/80 focus-within:outline-none">
                  <span>Upload a file</span>
                  <input id="file-upload" name="file-upload" type="file" class="sr-only"
                    accept=".pdf,.docx,.xlsx,.jpg,.jpeg,.png,.pptx,.txt,.zip">
                </label>
                <p class="pl-1">or drag and drop</p>
              </div>
              <p class="text-xs text-gray-500">PDF, Word, Excel, PowerPoint, Image or ZIP up to 10MB</p>
            </div>
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Description (Optional)</label>
          <textarea id="documentDescription"
            class="w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none transition-all duration-200"
            rows="2" placeholder="Add a brief description of this document..."></textarea>
        </div>
        <div id="uploadProgress" class="hidden mt-4">
          <div class="flex items-center justify-between mb-1">
            <span class="text-xs font-medium text-gray-700">Upload progress</span>
            <span id="uploadStatus" class="text-xs text-gray-500">Uploading: 0%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2.5 overflow-hidden">
            <div id="uploadProgressBar" class="bg-primary h-2.5 rounded-full transition-all duration-300"
              style="width: 0%"></div>
          </div>
        </div>
        <div class="flex justify-end gap-3 mt-6">
          <button type="button" onclick="hideAttachDocumentModal()"
            class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-button whitespace-nowrap transition-colors duration-200">Cancel</button>
          <button type="submit"
            class="px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-button whitespace-nowrap transition-colors duration-200 flex items-center gap-2">
            <i class="ri-upload-2-line w-4 h-4 flex items-center justify-center"></i>
            Upload Document
          </button>
        </div>
      </form>
    </div>
  </div>
  <div id="viewComplaintModal"
    class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg w-full max-w-3xl p-6 max-h-[90vh] overflow-y-auto">
      <div class="flex items-center justify-between mb-4 sticky top-0 bg-white pb-2 border-b">
        <h3 class="text-lg font-semibold">Complaint Details</h3>
        <div class="flex items-center gap-2">
          <button onclick="printComplaintDetails()" class="p-2 text-gray-700 hover:bg-gray-100 rounded-md"
            title="Print">
            <i class="ri-printer-line w-5 h-5 flex items-center justify-center"></i>
          </button>
          <button onclick="exportToPDF()" class="p-2 text-gray-700 hover:bg-gray-100 rounded-md" title="Export to PDF">
            <i class="ri-file-pdf-line w-5 h-5 flex items-center justify-center"></i>
          </button>
          <button onclick="hideViewModal()" class="p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-md">
            <i class="ri-close-line text-xl w-5 h-5 flex items-center justify-center"></i>
          </button>
        </div>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-4">
          <div>
            <h4 class="text-sm font-medium text-gray-500 mb-1">Complaint ID</h4>
            <p id="viewComplaintId" class="font-medium"></p>
          </div>
          <div>
            <h4 class="text-sm font-medium text-gray-500 mb-1">Date Filed</h4>
            <p id="viewComplaintDate"></p>
          </div>
          <div>
            <h4 class="text-sm font-medium text-gray-500 mb-1">Subject</h4>
            <p id="viewComplaintSubject" class="font-medium"></p>
          </div>
          <div>
            <h4 class="text-sm font-medium text-gray-500 mb-1">Status</h4>
            <p id="viewComplaintStatus"></p>
          </div>
        </div>
        <div>
          <h4 class="text-sm font-medium text-gray-500 mb-1">Description</h4>
          <p id="viewComplaintDescription" class="text-gray-700 mb-4"></p>
        </div>
      </div>
      <div class="mt-6">
        <h4 class="text-sm font-medium text-gray-700 mb-3">Complaint History</h4>
        <div class="border rounded-lg overflow-hidden">
          <table class="w-full text-sm">
            <thead class="bg-gray-50">
              <tr>
                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Date</th>
                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Action</th>
                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">By</th>
              </tr>
            </thead>
            <tbody id="complaintHistoryTable">
              <!-- History items will be populated here -->
            </tbody>
          </table>
        </div>
      </div>
      <div class="mt-6">
        <div class="flex items-center justify-between mb-3">
          <h4 class="text-sm font-medium text-gray-700">Attached Documents</h4>
          <button onclick="showAttachDocumentModal()"
            class="flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-primary bg-primary/10 hover:bg-primary/20 rounded-button whitespace-nowrap">
            <i class="ri-attachment-2 w-4 h-4 flex items-center justify-center"></i>
            Attach Document
          </button>
        </div>
        <div id="attachedDocuments" class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          <!-- Documents will be populated here -->
        </div>
      </div>
      <div class="mt-6">
        <h4 class="text-sm font-medium text-gray-700 mb-3">Related Interview Schedules</h4>
        <div id="relatedInterviews" class="space-y-3">
          <!-- Interview schedules will be populated here -->
        </div>
      </div>
    </div>
  </div>
  <div id="complaintsList" class="p-6">
    <div class="table-container">
      <table class="w-full">
        <thead>
          <tr class="bg-gray-50">
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Complaint ID</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Submission Date
            </th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Complainant</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          {% if complaints %}
          {% for complaint in complaints %}
          <tr>
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
              {{ complaint._id }}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
              {{ complaint.created_at }}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
              {{ complaint.details.personal_info.full_name }}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
              {{ complaint.details.personal_info.email }}
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                  {% if complaint.status == 'pending' %}bg-yellow-100 text-yellow-800
                  {% elif complaint.status == 'in_progress' %}bg-blue-100 text-blue-800
                  {% elif complaint.status == 'resolved' %}bg-green-100 text-green-800
                  {% elif complaint.status == 'rejected' %}bg-red-100 text-red-800
                  {% else %}bg-gray-100 text-gray-800{% endif %}">
                {{ complaint.status|title|replace('_', ' ') }}
              </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
              <button onclick="viewComplaint('{{ complaint._id }}')"
                class="text-primary hover:text-primary/80 mr-3">View</button>
              <button onclick="updateStatus('{{ complaint._id }}')" class="text-primary hover:text-primary/80">Update
                Status</button>
            </td>
          </tr>
          {% endfor %}
          {% else %}
          <tr>
            <td colspan="6" class="px-6 py-4 text-center text-sm text-gray-500">
              No complaints found
            </td>
          </tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>

  <script>
    const mockInterviews = [
      {
        id: "CMP-2025-001",
        date: "2025-04-02",
        time: "10:00 AM",
        mode: "In-person",
        status: "Scheduled",
        participants: "Dr. Thompson, Prof. Johnson, Student",
        location: "Admin Building, Room 302"
      },
      {
        id: "CMP-2025-002",
        date: "2025-04-05",
        time: "2:00 PM",
        mode: "In-person",
        status: "Scheduled",
        participants: "Dr. Thompson, Prof. Martinez, Student",
        location: "Science Building, Room 105"
      },
      {
        id: "CMP-2025-003",
        date: "2025-03-28",
        time: "11:00 AM",
        mode: "In-person",
        status: "Attended",
        participants: "Dr. Thompson, Research Committee, Faculty Member",
        location: "Admin Building, Room 405"
      },
      {
        id: "CMP-2025-003",
        date: "2025-03-29",
        time: "3:30 PM",
        mode: "Virtual",
        status: "Attended",
        participants: "Ethics Committee, Research Assistants",
        location: "Zoom Meeting"
      },
      {
        id: "CMP-2025-004",
        date: "2025-03-27",
        time: "9:00 AM",
        mode: "In-person",
        status: "Attended",
        participants: "Dr. Thompson, Student Affairs, Student",
        location: "Student Center, Room 201"
      },
      {
        id: "CMP-2025-004",
        date: "2025-03-28",
        time: "1:00 PM",
        mode: "In-person",
        status: "Attended",
        participants: "Disciplinary Committee, Witnesses, Student",
        location: "Admin Building, Hearing Room"
      },
      {
        id: "CMP-2025-006",
        date: "2025-03-23",
        time: "2:00 PM",
        mode: "Virtual",
        status: "Not Attended",
        participants: "Dr. Thompson, Academic Committee, Student",
        location: "Zoom Meeting"
      },
      {
        id: "CMP-2025-007",
        date: "2025-03-19",
        time: "10:30 AM",
        mode: "In-person",
        status: "Attended",
        participants: "Dr. Thompson, Department Chair, Complainants",
        location: "Science Building, Room 305"
      },
      {
        id: "CMP-2025-008",
        date: "2025-03-16",
        time: "1:00 PM",
        mode: "In-person",
        status: "Attended",
        participants: "Dr. Thompson, Equity Committee, Club Officers",
        location: "Student Center, Room 301"
      },
      {
        id: "CMP-2025-008",
        date: "2025-03-17",
        time: "10:00 AM",
        mode: "Virtual",
        status: "Attended",
        participants: "Dr. Thompson, Complainants",
        location: "Zoom Meeting"
      }
    ];
    const mockAllComplaints = [
      {
        id: "CMP-2025-001",
        date: "2025-03-28",
        subject: "Academic Misconduct Review",
        description: "Investigation of alleged cheating during midterm exams in Computer Science department.",
        status: "In Progress",
        complainant: "Dr. Emily Thompson",
        department: "Computer Science",
        history: [
          { date: "2025-03-28", action: "Complaint Filed", by: "Dr. Emily Thompson" },
          { date: "2025-03-28", action: "Assigned to Committee", by: "System" },
          { date: "2025-03-29", action: "Initial Review", by: "Dr. Michael Chen" }
        ],
        documents: [
          { name: "Exam_Evidence.pdf", type: "pdf", size: "2.4 MB", date: "2025-03-28" },
          { name: "Student_Statement.docx", type: "docx", size: "1.1 MB", date: "2025-03-29" }
        ],
        interviews: [
          { date: "2025-04-02", time: "10:00 AM", participants: "Dr. Thompson, Prof. Johnson, Student", location: "Admin Building, Room 302" }
        ]
      },
      {
        id: "CMP-2025-009",
        date: "2025-03-27",
        subject: "Curriculum Change Dispute",
        description: "Faculty members disputing proposed changes to the core curriculum requirements.",
        status: "In Progress",
        complainant: "Dr. Michael Chen",
        department: "Physics",
        history: [
          { date: "2025-03-27", action: "Complaint Filed", by: "Dr. Michael Chen" },
          { date: "2025-03-27", action: "Assigned to Committee", by: "System" },
          { date: "2025-03-28", action: "Initial Review", by: "Dr. Emily Thompson" }
        ],
        documents: [
          { name: "Current_Curriculum.pdf", type: "pdf", size: "3.2 MB", date: "2025-03-27" },
          { name: "Proposed_Changes.pdf", type: "pdf", size: "2.8 MB", date: "2025-03-27" }
        ],
        interviews: []
      },
      {
        id: "CMP-2025-010",
        date: "2025-03-26",
        subject: "Laboratory Access Complaint",
        description: "Graduate students reporting unequal access to research facilities.",
        status: "Scheduled",
        complainant: "Prof. Sarah Williams",
        department: "Biology",
        history: [
          { date: "2025-03-26", action: "Complaint Filed", by: "Prof. Sarah Williams" },
          { date: "2025-03-26", action: "Assigned to Committee", by: "System" },
          { date: "2025-03-27", action: "Initial Review", by: "Dr. Lisa Johnson" }
        ],
        documents: [
          { name: "Access_Records.pdf", type: "pdf", size: "1.9 MB", date: "2025-03-26" },
          { name: "Student_Petition.pdf", type: "pdf", size: "2.3 MB", date: "2025-03-26" }
        ],
        interviews: [
          { date: "2025-04-03", time: "1:30 PM", participants: "Prof. Williams, Lab Director, Student Representatives", location: "Science Building, Room 205" }
        ]
      },
      {
        id: "CMP-2025-011",
        date: "2025-03-25",
        subject: "Grading Policy Inconsistency",
        description: "Students reporting inconsistent application of grading policies across course sections.",
        status: "Completed",
        complainant: "Prof. James Rodriguez",
        department: "Economics",
        history: [
          { date: "2025-03-25", action: "Complaint Filed", by: "Prof. James Rodriguez" },
          { date: "2025-03-25", action: "Assigned to Committee", by: "System" },
          { date: "2025-03-26", action: "Initial Review", by: "Dr. Emily Thompson" },
          { date: "2025-03-29", action: "Investigation Completed", by: "Academic Affairs Committee" }
        ],
        documents: [
          { name: "Course_Syllabi.pdf", type: "pdf", size: "4.7 MB", date: "2025-03-25" },
          { name: "Grade_Distributions.xlsx", type: "xlsx", size: "3.1 MB", date: "2025-03-26" },
          { name: "Committee_Report.pdf", type: "pdf", size: "2.5 MB", date: "2025-03-29" }
        ],
        interviews: [
          { date: "2025-03-28", time: "9:30 AM", participants: "Prof. Rodriguez, Department Chair, Course Instructors", location: "Admin Building, Room 401" }
        ]
      },
      {
        id: "CMP-2025-012",
        date: "2025-03-24",
        subject: "Student Organization Funding Dispute",
        description: "Student clubs reporting inequitable distribution of activity funds.",
        status: "Resolved",
        resolvedDate: "2025-03-30",
        actionTaken: "Fund Reallocation",
        complainant: "Dr. Lisa Johnson",
        department: "Student Affairs",
        caseSummary: "Investigation confirmed funding disparities. Student Activities Office has implemented a new transparent allocation formula and redistributed remaining semester funds.",
        history: [
          { date: "2025-03-24", action: "Complaint Filed", by: "Dr. Lisa Johnson" },
          { date: "2025-03-24", action: "Assigned to Committee", by: "System" },
          { date: "2025-03-25", action: "Initial Review", by: "Prof. James Rodriguez" },
          { date: "2025-03-28", action: "Hearing Conducted", by: "Student Affairs Committee" },
          { date: "2025-03-30", action: "Resolution Issued", by: "Dr. Emily Thompson" }
        ],
        documents: [
          { name: "Funding_Records.pdf", type: "pdf", size: "2.8 MB", date: "2025-03-24" },
          { name: "Club_Statements.pdf", type: "pdf", size: "3.6 MB", date: "2025-03-26" },
          { name: "Resolution_Document.pdf", type: "pdf", size: "1.7 MB", date: "2025-03-30" }
        ],
        interviews: [
          { date: "2025-03-27", time: "2:00 PM", participants: "Dr. Johnson, Student Activities Director, Club Representatives", location: "Student Center, Room 301" }
        ]
      },
      {
        id: "CMP-2025-013",
        date: "2025-03-20",
        subject: "Faculty Promotion Criteria Dispute",
        description: "Associate professors challenging recent changes to promotion requirements.",
        status: "Cancelled",
        complainant: "Dr. Michael Chen",
        department: "Physics",
        history: [
          { date: "2025-03-20", action: "Complaint Filed", by: "Dr. Michael Chen" },
          { date: "2025-03-20", action: "Assigned to Committee", by: "System" },
          { date: "2025-03-21", action: "Initial Review", by: "Prof. Sarah Williams" },
          { date: "2025-03-22", action: "Complaint Withdrawn", by: "Complainant" },
          { date: "2025-03-22", action: "Case Cancelled", by: "Dr. Emily Thompson" }
        ],
        documents: [
          { name: "Promotion_Policy.pdf", type: "pdf", size: "3.2 MB", date: "2025-03-20" },
          { name: "Faculty_Petition.pdf", type: "pdf", size: "2.5 MB", date: "2025-03-20" },
          { name: "Withdrawal_Letter.pdf", type: "pdf", size: "0.8 MB", date: "2025-03-22" }
        ],
        interviews: []
      },
      {
        id: "CMP-2025-014",
        date: "2025-03-18",
        subject: "Research Ethics Violation",
        description: "Allegations of data fabrication in published research paper.",
        status: "In Progress",
        complainant: "Prof. Sarah Williams",
        department: "Biology",
        history: [
          { date: "2025-03-18", action: "Complaint Filed", by: "Prof. Sarah Williams" },
          { date: "2025-03-18", action: "Assigned to Committee", by: "System" },
          { date: "2025-03-19", action: "Initial Review", by: "Dr. Michael Chen" },
          { date: "2025-03-22", action: "Investigation Started", by: "Research Integrity Committee" }
        ],
        documents: [
          { name: "Published_Paper.pdf", type: "pdf", size: "4.5 MB", date: "2025-03-18" },
          { name: "Raw_Data_Analysis.xlsx", type: "xlsx", size: "7.2 MB", date: "2025-03-20" }
        ],
        interviews: [
          { date: "2025-04-01", time: "10:00 AM", participants: "Prof. Williams, Research Integrity Committee, Paper Authors", location: "Admin Building, Room 405" }
        ]
      },
      {
        id: "CMP-2025-015",
        date: "2025-03-15",
        subject: "Accessibility Accommodation Dispute",
        description: "Student with disabilities reporting inadequate accommodation in laboratory courses.",
        status: "Resolved",
        resolvedDate: "2025-03-25",
        actionTaken: "New Accommodations Implemented",
        complainant: "Dr. Lisa Johnson",
        department: "Student Affairs",
        caseSummary: "Investigation confirmed accommodation gaps. Disability Services has implemented new lab equipment and procedures to ensure equal access for all students.",
        history: [
          { date: "2025-03-15", action: "Complaint Filed", by: "Dr. Lisa Johnson" },
          { date: "2025-03-15", action: "Assigned to Committee", by: "System" },
          { date: "2025-03-16", action: "Initial Review", by: "Dr. Emily Thompson" },
          { date: "2025-03-20", action: "Investigation Conducted", by: "Accessibility Committee" },
          { date: "2025-03-25", action: "Resolution Issued", by: "Dr. Emily Thompson" }
        ],
        documents: [
          { name: "Accommodation_Request.pdf", type: "pdf", size: "1.8 MB", date: "2025-03-15" },
          { name: "Medical_Documentation.pdf", type: "pdf", size: "3.2 MB", date: "2025-03-16" },
          { name: "Resolution_Document.pdf", type: "pdf", size: "2.1 MB", date: "2025-03-25" }
        ],
        interviews: [
          { date: "2025-03-19", time: "11:00 AM", participants: "Dr. Johnson, Disability Services Director, Student, Lab Coordinator", location: "Science Building, Room 105" }
        ]
      }
    ];
    const mockComplaints = [
      {
        id: "CMP-2025-001",
        date: "2025-03-28",
        subject: "Academic Misconduct Review",
        description: "Investigation of alleged cheating during midterm exams in Computer Science department.",
        status: "In Progress",
        complainant: "Dr. Emily Thompson",
        department: "Computer Science",
        history: [
          { date: "2025-03-28", action: "Complaint Filed", by: "Dr. Emily Thompson" },
          { date: "2025-03-28", action: "Assigned to Committee", by: "System" },
          { date: "2025-03-29", action: "Initial Review", by: "Dr. Michael Chen" }
        ],
        documents: [
          { name: "Exam_Evidence.pdf", type: "pdf", size: "2.4 MB", date: "2025-03-28" },
          { name: "Student_Statement.docx", type: "docx", size: "1.1 MB", date: "2025-03-29" }
        ],
        interviews: [
          { date: "2025-04-02", time: "10:00 AM", participants: "Dr. Thompson, Prof. Johnson, Student", location: "Admin Building, Room 302" }
        ]
      },
      {
        id: "CMP-2025-002",
        date: "2025-03-27",
        subject: "Grade Appeal Investigation",
        description: "Student contesting final grade in Advanced Biology course, claiming unfair assessment criteria.",
        status: "Scheduled",
        history: [
          { date: "2025-03-27", action: "Complaint Filed", by: "Dr. Emily Thompson" },
          { date: "2025-03-27", action: "Assigned to Committee", by: "System" }
        ],
        documents: [
          { name: "Grade_Report.pdf", type: "pdf", size: "1.2 MB", date: "2025-03-27" },
          { name: "Course_Syllabus.pdf", type: "pdf", size: "3.5 MB", date: "2025-03-27" }
        ],
        interviews: [
          { date: "2025-04-05", time: "2:00 PM", participants: "Dr. Thompson, Prof. Martinez, Student", location: "Science Building, Room 105" }
        ]
      },
      {
        id: "CMP-2025-003",
        date: "2025-03-26",
        subject: "Research Ethics Violation",
        description: "Review of potential data manipulation in published research paper by faculty member.",
        status: "Completed",
        history: [
          { date: "2025-03-26", action: "Complaint Filed", by: "Dr. Emily Thompson" },
          { date: "2025-03-26", action: "Assigned to Committee", by: "System" },
          { date: "2025-03-27", action: "Initial Review", by: "Dr. Sarah Williams" },
          { date: "2025-03-30", action: "Investigation Completed", by: "Ethics Committee" }
        ],
        documents: [
          { name: "Research_Paper.pdf", type: "pdf", size: "4.7 MB", date: "2025-03-26" },
          { name: "Data_Analysis.xlsx", type: "xlsx", size: "8.2 MB", date: "2025-03-26" },
          { name: "Committee_Findings.pdf", type: "pdf", size: "2.8 MB", date: "2025-03-30" }
        ],
        interviews: [
          { date: "2025-03-28", time: "11:00 AM", participants: "Dr. Thompson, Research Committee, Faculty Member", location: "Admin Building, Room 405" },
          { date: "2025-03-29", time: "3:30 PM", participants: "Ethics Committee, Research Assistants", location: "Research Center, Conference Room" }
        ]
      },
      {
        id: "CMP-2025-004",
        date: "2025-03-25",
        subject: "Student Conduct Hearing",
        description: "Disciplinary hearing regarding inappropriate behavior during campus event.",
        status: "Resolved",
        resolvedDate: "2025-03-29",
        actionTaken: "Formal Warning Issued",
        caseSummary: "Student received formal warning and must complete 20 hours of community service. Case closed with probationary period of one semester.",
        history: [
          { date: "2025-03-25", action: "Complaint Filed", by: "Dr. Emily Thompson" },
          { date: "2025-03-25", action: "Assigned to Committee", by: "System" },
          { date: "2025-03-26", action: "Initial Review", by: "Student Affairs" },
          { date: "2025-03-28", action: "Hearing Conducted", by: "Disciplinary Committee" },
          { date: "2025-03-29", action: "Resolution Issued", by: "Dr. Emily Thompson" }
        ],
        documents: [
          { name: "Incident_Report.pdf", type: "pdf", size: "1.8 MB", date: "2025-03-25" },
          { name: "Witness_Statements.pdf", type: "pdf", size: "3.2 MB", date: "2025-03-26" },
          { name: "Resolution_Document.pdf", type: "pdf", size: "1.5 MB", date: "2025-03-29" }
        ],
        interviews: [
          { date: "2025-03-27", time: "9:00 AM", participants: "Dr. Thompson, Student Affairs, Student", location: "Student Center, Room 201" },
          { date: "2025-03-28", time: "1:00 PM", participants: "Disciplinary Committee, Witnesses, Student", location: "Admin Building, Hearing Room" }
        ]
      },
      {
        id: "CMP-2025-005",
        date: "2025-03-24",
        subject: "Faculty Grievance Review",
        description: "Complaint about unequal distribution of teaching assignments in Economics department.",
        status: "Cancelled",
        history: [
          { date: "2025-03-24", action: "Complaint Filed", by: "Dr. Emily Thompson" },
          { date: "2025-03-24", action: "Assigned to Committee", by: "System" },
          { date: "2025-03-25", action: "Initial Review", by: "Faculty Affairs" },
          { date: "2025-03-26", action: "Complaint Withdrawn", by: "Complainant" },
          { date: "2025-03-26", action: "Case Cancelled", by: "Dr. Emily Thompson" }
        ],
        documents: [
          { name: "Teaching_Schedule.pdf", type: "pdf", size: "2.1 MB", date: "2025-03-24" },
          { name: "Department_Policy.pdf", type: "pdf", size: "4.3 MB", date: "2025-03-24" },
          { name: "Withdrawal_Letter.pdf", type: "pdf", size: "0.9 MB", date: "2025-03-26" }
        ],
        interviews: []
      },
      {
        id: "CMP-2025-006",
        date: "2025-03-20",
        subject: "Plagiarism Case Review",
        description: "Investigation of alleged plagiarism in senior thesis submission.",
        status: "Resolved",
        resolvedDate: "2025-03-26",
        actionTaken: "Grade Reduction",
        caseSummary: "Student admitted to plagiarism. Committee decided on grade reduction and mandatory academic integrity course completion.",
        history: [
          { date: "2025-03-20", action: "Complaint Filed", by: "Dr. Emily Thompson" },
          { date: "2025-03-20", action: "Assigned to Committee", by: "System" },
          { date: "2025-03-22", action: "Initial Review", by: "Academic Integrity Office" },
          { date: "2025-03-24", action: "Hearing Conducted", by: "Academic Committee" },
          { date: "2025-03-26", action: "Resolution Issued", by: "Dr. Emily Thompson" }
        ],
        documents: [
          { name: "Original_Thesis.pdf", type: "pdf", size: "5.8 MB", date: "2025-03-20" },
          { name: "Source_Comparison.pdf", type: "pdf", size: "3.2 MB", date: "2025-03-22" },
          { name: "Student_Admission.pdf", type: "pdf", size: "1.1 MB", date: "2025-03-24" },
          { name: "Resolution_Document.pdf", type: "pdf", size: "1.7 MB", date: "2025-03-26" }
        ],
        interviews: [
          { date: "2025-03-23", time: "2:00 PM", participants: "Dr. Thompson, Academic Committee, Student", location: "Admin Building, Room 204" }
        ]
      },
      {
        id: "CMP-2025-007",
        date: "2025-03-15",
        subject: "Research Funding Dispute",
        description: "Complaint regarding inequitable distribution of research grants in Physics department.",
        status: "Resolved",
        resolvedDate: "2025-03-24",
        actionTaken: "Policy Revision",
        caseSummary: "Investigation found procedural issues in grant allocation. Department revised funding policy with new transparency measures.",
        history: [
          { date: "2025-03-15", action: "Complaint Filed", by: "Dr. Emily Thompson" },
          { date: "2025-03-15", action: "Assigned to Committee", by: "System" },
          { date: "2025-03-17", action: "Initial Review", by: "Research Office" },
          { date: "2025-03-20", action: "Investigation Conducted", by: "Funding Committee" },
          { date: "2025-03-24", action: "Resolution Issued", by: "Dr. Emily Thompson" }
        ],
        documents: [
          { name: "Grant_Applications.pdf", type: "pdf", size: "7.2 MB", date: "2025-03-15" },
          { name: "Funding_History.xlsx", type: "xlsx", size: "4.5 MB", date: "2025-03-17" },
          { name: "Committee_Report.pdf", type: "pdf", size: "3.8 MB", date: "2025-03-22" },
          { name: "New_Policy_Document.pdf", type: "pdf", size: "2.3 MB", date: "2025-03-24" }
        ],
        interviews: [
          { date: "2025-03-19", time: "10:30 AM", participants: "Dr. Thompson, Department Chair, Complainants", location: "Science Building, Room 305" }
        ]
      },
      {
        id: "CMP-2025-008",
        date: "2025-03-10",
        subject: "Discrimination Complaint",
        description: "Investigation of alleged discriminatory practices in student club membership selection.",
        status: "Resolved",
        resolvedDate: "2025-03-22",
        actionTaken: "Mandatory Training",
        caseSummary: "Evidence supported claims of biased selection. Club leadership required to undergo diversity training and implement fair selection process.",
        history: [
          { date: "2025-03-10", action: "Complaint Filed", by: "Dr. Emily Thompson" },
          { date: "2025-03-10", action: "Assigned to Committee", by: "System" },
          { date: "2025-03-12", action: "Initial Review", by: "Diversity Office" },
          { date: "2025-03-15", action: "Investigation Conducted", by: "Equity Committee" },
          { date: "2025-03-18", action: "Hearing Held", by: "Dr. Emily Thompson" },
          { date: "2025-03-22", action: "Resolution Issued", by: "Dr. Emily Thompson" }
        ],
        documents: [
          { name: "Selection_Records.pdf", type: "pdf", size: "3.4 MB", date: "2025-03-10" },
          { name: "Student_Testimonies.pdf", type: "pdf", size: "5.6 MB", date: "2025-03-14" },
          { name: "Committee_Findings.pdf", type: "pdf", size: "2.9 MB", date: "2025-03-20" },
          { name: "Resolution_Document.pdf", type: "pdf", size: "1.8 MB", date: "2025-03-22" }
        ],
        interviews: [
          { date: "2025-03-16", time: "1:00 PM", participants: "Dr. Thompson, Equity Committee, Club Officers", location: "Student Center, Room 301" },
          { date: "2025-03-17", time: "10:00 AM", participants: "Dr. Thompson, Complainants", location: "Admin Building, Room 202" }
        ]
      }
    ];
    const mockReappealCases = [
      {
        id: "CMP-2025-004",
        resolvedDate: "2025-03-29",
        caseSummary: "Student received formal warning and must complete 20 hours of community service. Case closed with probationary period of one semester.",
        reappealDate: "2025-04-05",
        reasonForReappeal: "New evidence showing student was not present at the event in question."
      },
      {
        id: "CMP-2025-006",
        resolvedDate: "2025-03-26",
        caseSummary: "Student admitted to plagiarism. Committee decided on grade reduction and mandatory academic integrity course completion.",
        reappealDate: "2025-04-02",
        reasonForReappeal: "Student claims admission was made under duress and requests reconsideration."
      },
      {
        id: "CMP-2025-007",
        resolvedDate: "2025-03-24",
        caseSummary: "Investigation found procedural issues in grant allocation. Department revised funding policy with new transparency measures.",
        reappealDate: "2025-03-30",
        reasonForReappeal: "Faculty members claim new policy still contains inequitable distribution mechanisms."
      },
      {
        id: "CMP-2025-008",
        resolvedDate: "2025-03-22",
        caseSummary: "Evidence supported claims of biased selection. Club leadership required to undergo diversity training and implement fair selection process.",
        reappealDate: "2025-03-28",
        reasonForReappeal: "Club leadership disputes findings and requests independent review of selection process."
      }
    ];
    function getStatusBadgeClass(status) {
      const classes = {
        "In Progress": "bg-blue-100 text-blue-800",
        "Scheduled": "bg-yellow-100 text-yellow-800",
        "Completed": "bg-green-100 text-green-800",
        "Resolved": "bg-purple-100 text-purple-800",
        "Cancelled": "bg-red-100 text-red-800"
      };
      return classes[status] || "bg-gray-100 text-gray-800";
    }
    let currentPage = 1;
    const rowsPerPage = 10;
    let totalPages = Math.ceil(mockComplaints.length / rowsPerPage);
    function populateTable() {
      const tbody = document.getElementById('complaintsTableBody');
      tbody.innerHTML = '';
      const startIndex = (currentPage - 1) * rowsPerPage;
      const endIndex = Math.min(startIndex + rowsPerPage, mockComplaints.length);
      for (let i = startIndex; i < endIndex; i++) {
        const complaint = mockComplaints[i];
        const tr = document.createElement('tr');
        tr.className = 'border-b hover:bg-gray-50';
        tr.innerHTML = `
<td class="px-6 py-4 font-medium">${complaint.id}</td>
<td class="px-6 py-4">${complaint.date}</td>
<td class="px-6 py-4">${complaint.subject}</td>
<td class="px-6 py-4">
<span class="px-2 py-1 text-xs font-medium ${getStatusBadgeClass(complaint.status)} rounded-full">
${complaint.status}
</span>
</td>
<td class="px-6 py-4">
<div class="flex items-center gap-2">
<button class="p-1 text-gray-500 hover:text-gray-700" title="View" onclick="showViewModal('${complaint.id}')">
<i class="ri-eye-line w-5 h-5 flex items-center justify-center"></i>
</button>
<button class="p-1 text-gray-500 hover:text-gray-700" title="Edit" onclick="showEditModal('${complaint.id}')">
<i class="ri-edit-line w-5 h-5 flex items-center justify-center"></i>
</button>
<button class="p-1 text-gray-500 hover:text-gray-700" title="Delete" onclick="showDeleteConfirmation('${complaint.id}')">
<i class="ri-delete-bin-line w-5 h-5 flex items-center justify-center"></i>
</button>
</div>
</td>
`;
        tbody.appendChild(tr);
      }
      updatePaginationControls();
    }
    function populateResolvedCasesTable() {
      const tbody = document.getElementById('resolvedCasesTableBody');
      tbody.innerHTML = '';
      const resolvedCases = mockComplaints.filter(complaint => complaint.status === "Resolved");
      const startIndex = (resolvedCurrentPage - 1) * resolvedRowsPerPage;
      const endIndex = Math.min(startIndex + resolvedRowsPerPage, resolvedCases.length);
      for (let i = startIndex; i < endIndex; i++) {
        const complaint = resolvedCases[i];
        const tr = document.createElement('tr');
        tr.className = 'border-b hover:bg-gray-50';
        tr.innerHTML = `
<td class="px-6 py-4 font-medium">${complaint.id}</td>
<td class="px-6 py-4">${complaint.resolvedDate}</td>
<td class="px-6 py-4">${complaint.subject}</td>
<td class="px-6 py-4">${complaint.actionTaken}</td>
<td class="px-6 py-4">
<button class="text-sm text-primary hover:underline flex items-center gap-1" onclick="showCaseSummaryModal('${complaint.id}')">
<i class="ri-file-text-line w-4 h-4 flex items-center justify-center"></i>
View Summary
</button>
</td>
<td class="px-6 py-4">
<div class="flex items-center gap-2">
<button class="p-1 text-gray-500 hover:text-gray-700" title="View" onclick="showViewModal('${complaint.id}')">
<i class="ri-eye-line w-5 h-5 flex items-center justify-center"></i>
</button>
</div>
</td>
`;
        tbody.appendChild(tr);
      }
      updateResolvedPaginationControls();
    }
    function updatePaginationControls() {
      document.getElementById('currentPage').textContent = currentPage;
      const prevButton = document.getElementById('prevPageBtn');
      const nextButton = document.querySelector('button[onclick="nextPage()"]');
      if (currentPage <= 1) {
        prevButton.classList.remove('text-gray-700', 'hover:bg-gray-100');
        prevButton.classList.add('text-gray-400', 'cursor-not-allowed');
        prevButton.disabled = true;
      } else {
        prevButton.classList.remove('text-gray-400', 'cursor-not-allowed');
        prevButton.classList.add('text-gray-700', 'hover:bg-gray-100');
        prevButton.disabled = false;
      }
      if (currentPage >= totalPages) {
        nextButton.classList.remove('text-gray-700', 'hover:bg-gray-100');
        nextButton.classList.add('text-gray-400', 'cursor-not-allowed');
        nextButton.disabled = true;
      } else {
        nextButton.classList.remove('text-gray-400', 'cursor-not-allowed');
        nextButton.classList.add('text-gray-700', 'hover:bg-gray-100');
        nextButton.disabled = false;
      }
    }
    function updateResolvedPaginationControls() {
      document.getElementById('resolvedCurrentPage').textContent = resolvedCurrentPage;
      const prevButton = document.getElementById('resolvedPrevPageBtn');
      const nextButton = document.getElementById('resolvedNextPageBtn');
      if (resolvedCurrentPage <= 1) {
        prevButton.classList.remove('text-gray-700', 'hover:bg-gray-100');
        prevButton.classList.add('text-gray-400', 'cursor-not-allowed');
        prevButton.disabled = true;
      } else {
        prevButton.classList.remove('text-gray-400', 'cursor-not-allowed');
        prevButton.classList.add('text-gray-700', 'hover:bg-gray-100');
        prevButton.disabled = false;
      }
      if (resolvedCurrentPage >= resolvedTotalPages) {
        nextButton.classList.remove('text-gray-700', 'hover:bg-gray-100');
        nextButton.classList.add('text-gray-400', 'cursor-not-allowed');
        nextButton.disabled = true;
      } else {
        nextButton.classList.remove('text-gray-400', 'cursor-not-allowed');
        nextButton.classList.add('text-gray-700', 'hover:bg-gray-100');
        nextButton.disabled = false;
      }
    }
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('show');
    }
    function showAddComplaintModal() {
      document.getElementById('addComplaintModal').classList.remove('hidden');
    }
    function hideAddComplaintModal() {
      document.getElementById('addComplaintModal').classList.add('hidden');
    }
    function showScheduleInterviewModal() {
      // Set default date to tomorrow
      const tomorrow = new Date();
      tomorrow.setDate(tomorrow.getDate() + 1);
      document.getElementById('interviewDate').value = tomorrow.toISOString().split('T')[0];
      document.getElementById('scheduleInterviewModal').classList.remove('hidden');
    }
    function hideScheduleInterviewModal() {
      document.getElementById('scheduleInterviewModal').classList.add('hidden');
      document.getElementById('interviewForm').reset();
    }
    function showEditInterviewModal(complaintId, interviewDate) {
      const interview = mockInterviews.find(i => i.id === complaintId && i.date === interviewDate);
      if (interview) {
        document.getElementById('editInterviewId').value = interview.id;
        document.getElementById('editInterviewOriginalDate').value = interview.date;
        document.getElementById('editComplaintId').value = interview.id;
        document.getElementById('editInterviewDate').value = interview.date;
        document.getElementById('editInterviewTime').value = interview.time.replace(' AM', '').replace(' PM', '');
        document.getElementById('editInterviewMode').value = interview.mode;
        document.getElementById('editInterviewLocation').value = interview.location;
        document.getElementById('editInterviewParticipants').value = interview.participants;
        document.getElementById('editInterviewModal').classList.remove('hidden');
      }
    }
    function hideEditInterviewModal() {
      document.getElementById('editInterviewModal').classList.add('hidden');
    }
    function showCancelInterviewModal(complaintId, interviewDate) {
      const interview = mockInterviews.find(i => i.id === complaintId && i.date === interviewDate);
      if (interview) {
        document.getElementById('cancelInterviewComplaintId').textContent = interview.id;
        document.getElementById('cancelInterviewDate').textContent = `${interview.date} at ${interview.time}`;
        document.getElementById('interviewIdToCancel').value = interview.id;
        document.getElementById('interviewDateToCancel').value = interview.date;
        document.getElementById('cancelInterviewModal').classList.remove('hidden');
      }
    }
    function hideCancelInterviewModal() {
      document.getElementById('cancelInterviewModal').classList.add('hidden');
      document.getElementById('cancellationReason').value = '';
    }
    function confirmCancelInterview() {
      const complaintId = document.getElementById('interviewIdToCancel').value;
      const interviewDate = document.getElementById('interviewDateToCancel').value;
      const reason = document.getElementById('cancellationReason').value;
      if (!reason.trim()) {
        alert('Please provide a reason for cancellation.');
        return;
      }
      const index = mockInterviews.findIndex(i => i.id === complaintId && i.date === interviewDate);
      if (index !== -1) {
        // In a real application, you would send this to the server
        // Here we just update the status
        mockInterviews[index].status = 'Not Attended';
        populateMyInterviewsTable();
        populateInterviewListTable();
      }
      hideCancelInterviewModal();
      const notification = document.createElement('div');
      notification.className = 'fixed bottom-4 right-4 bg-green-100 text-green-800 px-4 py-3 rounded-lg shadow-lg';
      notification.innerHTML = `
<div class="flex items-center">
<i class="ri-check-line mr-2"></i>
<span>Interview for ${complaintId} has been cancelled.</span>
</div>
`;
      document.body.appendChild(notification);
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }
    function showDeleteConfirmation(complaintId) {
      document.getElementById('deleteComplaintId').textContent = complaintId;
      document.getElementById('complaintIdToDelete').value = complaintId;
      document.getElementById('deleteConfirmationModal').classList.remove('hidden');
    }
    function hideDeleteConfirmation() {
      document.getElementById('deleteConfirmationModal').classList.add('hidden');
    }
    function deleteComplaint() {
      const complaintId = document.getElementById('complaintIdToDelete').value;
      const index = mockComplaints.findIndex(complaint => complaint.id === complaintId);
      if (index !== -1) {
        mockComplaints.splice(index, 1);
        populateTable();
        populateComplaintsListTable();
      }
      hideDeleteConfirmation();
    }
    function showEditModal(complaintId) {
      const complaint = mockComplaints.find(c => c.id === complaintId);
      if (complaint) {
        document.getElementById('editComplaintId').value = complaint.id;
        document.getElementById('editComplaintSubject').value = complaint.subject;
        document.getElementById('editComplaintDescription').value = complaint.description;
        document.getElementById('editComplaintModal').classList.remove('hidden');
      }
    }
    function hideEditModal() {
      document.getElementById('editComplaintModal').classList.add('hidden');
    }
    function showViewModal(complaintId) {
      const complaint = mockComplaints.find(c => c.id === complaintId) || mockAllComplaints.find(c => c.id === complaintId);
      if (complaint) {
        // Store the current complaint ID for document attachment
        document.getElementById('attachDocumentComplaintId').textContent = complaint.id;
        // Populate basic information
        document.getElementById('viewComplaintId').textContent = complaint.id;
        document.getElementById('viewComplaintDate').textContent = complaint.date;
        document.getElementById('viewComplaintSubject').textContent = complaint.subject;
        document.getElementById('viewComplaintDescription').textContent = complaint.description;
        // Create status badge
        const statusBadgeClass = getStatusBadgeClass(complaint.status);
        document.getElementById('viewComplaintStatus').innerHTML = `
<span class="px-2 py-1 text-xs font-medium ${statusBadgeClass} rounded-full">
${complaint.status}
</span>
`;
        // Populate history table
        const historyTable = document.getElementById('complaintHistoryTable');
        historyTable.innerHTML = '';
        complaint.history.forEach(item => {
          const row = document.createElement('tr');
          row.className = 'border-t';
          row.innerHTML = `
<td class="px-4 py-2 text-gray-700">${item.date}</td>
<td class="px-4 py-2 font-medium">${item.action}</td>
<td class="px-4 py-2 text-gray-700">${item.by}</td>
`;
          historyTable.appendChild(row);
        });
        // Populate documents
        const documentsContainer = document.getElementById('attachedDocuments');
        documentsContainer.innerHTML = '';
        if (!complaint.documents || complaint.documents.length === 0) {
          documentsContainer.innerHTML = '<p class="text-gray-500 italic">No documents attached</p>';
        } else {
          complaint.documents.forEach(doc => {
            const iconClass = getDocumentIconClass(doc.type);
            const docElement = document.createElement('div');
            docElement.className = 'flex items-center p-3 border rounded-md hover:bg-gray-50 cursor-pointer';
            docElement.innerHTML = `
<div class="w-8 h-8 flex items-center justify-center text-gray-500">
<i class="${iconClass} text-xl"></i>
</div>
<div class="ml-3 flex-1 min-w-0">
<p class="text-sm font-medium text-gray-900 truncate">${doc.name}</p>
<p class="text-xs text-gray-500">${doc.size} • ${doc.date}</p>
</div>
<button class="p-1 text-gray-400 hover:text-gray-700">
<i class="ri-download-line w-5 h-5 flex items-center justify-center"></i>
</button>
`;
            documentsContainer.appendChild(docElement);
          });
        }
        // Populate interviews
        const interviewsContainer = document.getElementById('relatedInterviews');
        interviewsContainer.innerHTML = '';
        if (!complaint.interviews || complaint.interviews.length === 0) {
          interviewsContainer.innerHTML = '<p class="text-gray-500 italic">No interviews scheduled</p>';
        } else {
          complaint.interviews.forEach(interview => {
            const interviewElement = document.createElement('div');
            interviewElement.className = 'flex items-start p-3 border rounded-md';
            interviewElement.innerHTML = `
<div class="w-8 h-8 flex items-center justify-center text-primary bg-primary/10 rounded-full">
<i class="ri-calendar-event-line w-5 h-5 flex items-center justify-center"></i>
</div>
<div class="ml-3 flex-1">
<div class="flex items-center justify-between">
<p class="text-sm font-medium text-gray-900">${interview.date} at ${interview.time}</p>
<span class="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">Upcoming</span>
</div>
<p class="text-sm text-gray-700 mt-1">${interview.location}</p>
<p class="text-sm text-gray-500 mt-1">Participants: ${interview.participants}</p>
</div>
`;
            interviewsContainer.appendChild(interviewElement);
          });
        }
        document.getElementById('viewComplaintModal').classList.remove('hidden');
      }
    }
    function showAttachDocumentModal() {
      const complaintId = document.getElementById('viewComplaintId').textContent;
      document.getElementById('attachDocumentComplaintId').textContent = complaintId;
      document.getElementById('attachDocumentModal').classList.remove('hidden');
      // Reset form and progress bar
      document.getElementById('attachDocumentForm').reset();
      document.getElementById('uploadProgress').classList.add('hidden');
      document.getElementById('uploadProgressBar').style.width = '0%';
      document.getElementById('uploadStatus').textContent = 'Uploading: 0%';
      // Remove any previous file name display
      const existingFileNameDisplay = document.querySelector('.border-dashed .text-xs.text-gray-700.mt-2');
      if (existingFileNameDisplay) {
        existingFileNameDisplay.remove();
      }
    }
    function hideAttachDocumentModal() {
      document.getElementById('attachDocumentModal').classList.add('hidden');
      document.getElementById('attachDocumentForm').reset();
      document.getElementById('uploadProgress').classList.add('hidden');
      document.getElementById('uploadProgressBar').style.width = '0%';
      document.getElementById('uploadStatus').textContent = 'Uploading: 0%';
      // Remove any file name display
      const existingFileNameDisplay = document.querySelector('.border-dashed .text-xs.text-gray-700.mt-2');
      if (existingFileNameDisplay) {
        existingFileNameDisplay.remove();
      }
      // Reset the border color of drop area
      const dropArea = document.querySelector('.border-dashed');
      dropArea.classList.remove('border-primary', 'bg-primary/5');
    }
    function hideViewModal() {
      document.getElementById('viewComplaintModal').classList.add('hidden');
    }
    function getDocumentIconClass(type) {
      const iconMap = {
        'pdf': 'ri-file-pdf-line',
        'docx': 'ri-file-word-line',
        'doc': 'ri-file-word-line',
        'xlsx': 'ri-file-excel-line',
        'xls': 'ri-file-excel-line',
        'pptx': 'ri-file-ppt-line',
        'ppt': 'ri-file-ppt-line',
        'jpg': 'ri-image-line',
        'jpeg': 'ri-image-line',
        'png': 'ri-image-line'
      };
      return iconMap[type] || 'ri-file-line';
    }
    function printComplaintDetails() {
      window.print();
    }
    function exportToPDF() {
      // In a real application, this would use a PDF generation library
      const complaintId = document.getElementById('viewComplaintId').textContent;
      const notification = document.createElement('div');
      notification.className = 'fixed bottom-4 right-4 bg-green-100 text-green-800 px-4 py-3 rounded-lg shadow-lg';
      notification.innerHTML = `
<div class="flex items-center">
<i class="ri-check-line mr-2"></i>
<span>Exporting ${complaintId} to PDF...</span>
</div>
`;
      document.body.appendChild(notification);
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }
    function showCaseSummaryModal(complaintId) {
      const complaint = mockComplaints.find(c => c.id === complaintId);
      if (complaint) {
        document.getElementById('summaryComplaintId').textContent = complaint.id;
        document.getElementById('summaryResolvedDate').textContent = complaint.resolvedDate;
        document.getElementById('summaryActionTaken').textContent = complaint.actionTaken;
        document.getElementById('summaryCaseContent').textContent = complaint.caseSummary;
        document.getElementById('caseSummaryModal').classList.remove('hidden');
      }
    }
    function hideCaseSummaryModal() {
      document.getElementById('caseSummaryModal').classList.add('hidden');
    }
    function downloadCaseSummary() {
      const complaintId = document.getElementById('summaryComplaintId').textContent;
      const notification = document.createElement('div');
      notification.className = 'fixed bottom-4 right-4 bg-green-100 text-green-800 px-4 py-3 rounded-lg shadow-lg';
      notification.innerHTML = `
<div class="flex items-center">
<i class="ri-check-line mr-2"></i>
<span>Downloading summary for ${complaintId}...</span>
</div>
`;
      document.body.appendChild(notification);
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }
    function previousPage() {
      if (currentPage > 1) {
        currentPage--;
        populateTable();
        populateComplaintsListTable();
      }
    }
    function nextPage() {
      if (currentPage < totalPages) {
        currentPage++;
        populateTable();
        populateComplaintsListTable();
      }
    }
    function updateRowsPerPage(value) {
      rowsPerPage = parseInt(value);
      totalPages = Math.ceil(mockComplaints.length / rowsPerPage);
      currentPage = 1;
      populateTable();
      populateComplaintsListTable();
    }
    function saveComplaintChanges(e) {
      e.preventDefault();
      const complaintId = document.getElementById('editComplaintId').value;
      const subject = document.getElementById('editComplaintSubject').value;
      const description = document.getElementById('editComplaintDescription').value;
      if (!subject.trim() || !description.trim()) {
        return;
      }
      const index = mockComplaints.findIndex(c => c.id === complaintId);
      if (index !== -1) {
        mockComplaints[index].subject = subject;
        mockComplaints[index].description = description;
        populateTable();
        populateComplaintsListTable();
      }
      hideEditModal();
    }
    document.getElementById('complaintForm').addEventListener('submit', function (e) {
      e.preventDefault();
      hideAddComplaintModal();
    });
    document.getElementById('interviewForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const complaintId = document.getElementById('complaintIdSelect').value;
      const date = document.getElementById('interviewDate').value;
      const time = document.getElementById('interviewTime').value;
      const mode = document.getElementById('interviewMode').value;
      const location = document.getElementById('interviewLocation').value;
      const participants = document.getElementById('interviewParticipants').value;
      if (!complaintId || !date || !time || !mode || !location || !participants) {
        return;
      }
      // Format time to AM/PM format
      const timeFormatted = new Date(`2000-01-01T${time}`).toLocaleTimeString('en-US', {
        hour: 'numeric',
        minute: '2-digit',
        hour12: true
      });
      // Add new interview to mock data
      mockInterviews.push({
        id: complaintId,
        date: date,
        time: timeFormatted,
        mode: mode,
        status: 'Scheduled',
        participants: participants,
        location: location
      });
      hideScheduleInterviewModal();
      populateMyInterviewsTable();
      populateInterviewListTable();
      const notification = document.createElement('div');
      notification.className = 'fixed bottom-4 right-4 bg-green-100 text-green-800 px-4 py-3 rounded-lg shadow-lg';
      notification.innerHTML = `
<div class="flex items-center">
<i class="ri-check-line mr-2"></i>
<span>Interview for ${complaintId} has been scheduled.</span>
</div>
`;
      document.body.appendChild(notification);
      setTimeout(() => {
        notification.remove();
      }, 3000);
    });
    document.getElementById('editInterviewForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const complaintId = document.getElementById('editComplaintId').value;
      const originalDate = document.getElementById('editInterviewOriginalDate').value;
      const date = document.getElementById('editInterviewDate').value;
      const time = document.getElementById('editInterviewTime').value;
      const mode = document.getElementById('editInterviewMode').value;
      const location = document.getElementById('editInterviewLocation').value;
      const participants = document.getElementById('editInterviewParticipants').value;
      if (!complaintId || !date || !time || !mode || !location || !participants) {
        return;
      }
      // Format time to AM/PM format
      const timeFormatted = new Date(`2000-01-01T${time}`).toLocaleTimeString('en-US', {
        hour: 'numeric',
        minute: '2-digit',
        hour12: true
      });
      // Update interview in mock data
      const index = mockInterviews.findIndex(i => i.id === complaintId && i.date === originalDate);
      if (index !== -1) {
        mockInterviews[index].date = date;
        mockInterviews[index].time = timeFormatted;
        mockInterviews[index].mode = mode;
        mockInterviews[index].location = location;
        mockInterviews[index].participants = participants;
      }
      hideEditInterviewModal();
      populateMyInterviewsTable();
      populateInterviewListTable();
      const notification = document.createElement('div');
      notification.className = 'fixed bottom-4 right-4 bg-green-100 text-green-800 px-4 py-3 rounded-lg shadow-lg';
      notification.innerHTML = `
<div class="flex items-center">
<i class="ri-check-line mr-2"></i>
<span>Interview for ${complaintId} has been updated.</span>
</div>
`;
      document.body.appendChild(notification);
      setTimeout(() => {
        notification.remove();
      }, 3000);
    });
    document.getElementById('editComplaintForm').addEventListener('submit', saveComplaintChanges);
    document.getElementById('attachDocumentForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const complaintId = document.getElementById('attachDocumentComplaintId').textContent;
      const title = document.getElementById('documentTitle').value;
      const type = document.getElementById('documentType').value;
      const description = document.getElementById('documentDescription').value;
      const fileInput = document.getElementById('file-upload');

      // Validate form
      if (!title || !type || !fileInput.files[0]) {
        const notification = document.createElement('div');
        notification.className = 'fixed bottom-4 right-4 bg-red-100 text-red-800 px-4 py-3 rounded-lg shadow-lg z-50';
        notification.innerHTML = `
  <div class="flex items-center">
    <i class="ri-error-warning-line mr-2 w-5 h-5 flex items-center justify-center"></i>
    <span>Please fill in all required fields and select a file.</span>
  </div>
  `;
        document.body.appendChild(notification);
        setTimeout(() => {
          notification.remove();
        }, 3000);
        return;
      }

      // Show upload progress
      document.getElementById('uploadProgress').classList.remove('hidden');

      // Simulate upload progress
      let progress = 0;
      const progressBar = document.getElementById('uploadProgressBar');
      const progressStatus = document.getElementById('uploadStatus');
      const progressInterval = setInterval(() => {
        progress += 5;
        progressBar.style.width = `${progress}%`;
        progressStatus.textContent = `Uploading: ${progress}%`;

        if (progress >= 100) {
          clearInterval(progressInterval);
          progressStatus.textContent = 'Upload complete!';

          // Add the document to the complaint
          const complaint = mockComplaints.find(c => c.id === complaintId) || mockAllComplaints.find(c => c.id === complaintId);
          if (complaint) {
            if (!complaint.documents) {
              complaint.documents = [];
            }

            // Generate file metadata
            const today = new Date().toISOString().split('T')[0];
            const fileSize = Math.floor(Math.random() * 5) + 1 + '.' + Math.floor(Math.random() * 9) + ' MB';
            const fileName = title + '.' + type;

            // Add document to complaint
            complaint.documents.push({
              name: fileName,
              type: type,
              size: fileSize,
              date: today,
              description: description
            });

            // Update the documents in the view modal
            const documentsContainer = document.getElementById('attachedDocuments');
            documentsContainer.innerHTML = '';

            if (complaint.documents.length === 0) {
              documentsContainer.innerHTML = '<p class="text-gray-500 italic">No documents attached</p>';
            } else {
              complaint.documents.forEach(doc => {
                const iconClass = getDocumentIconClass(doc.type);
                const docElement = document.createElement('div');
                docElement.className = 'flex items-center p-3 border rounded-md hover:bg-gray-50 cursor-pointer transition-colors duration-150';
                docElement.innerHTML = `
          <div class="w-8 h-8 flex items-center justify-center text-gray-500">
            <i class="${iconClass} text-xl"></i>
          </div>
          <div class="ml-3 flex-1 min-w-0">
            <p class="text-sm font-medium text-gray-900 truncate">${doc.name}</p>
            <p class="text-xs text-gray-500">${doc.size} • ${doc.date}</p>
            ${doc.description ? `<p class="text-xs text-gray-500 italic mt-1 truncate">${doc.description}</p>` : ''}
          </div>
          <button class="p-1 text-gray-400 hover:text-gray-700 transition-colors duration-150">
            <i class="ri-download-line w-5 h-5 flex items-center justify-center"></i>
          </button>
          `;
                documentsContainer.appendChild(docElement);
              });
            }

            // Add to history
            if (complaint.history) {
              const today = new Date().toISOString().split('T')[0];
              complaint.history.push({
                date: today,
                action: "Document Attached",
                by: "Dr. Emily Thompson"
              });

              // Update history table
              const historyTable = document.getElementById('complaintHistoryTable');
              historyTable.innerHTML = '';
              complaint.history.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'border-t';
                row.innerHTML = `
          <td class="px-4 py-2 text-gray-700">${item.date}</td>
          <td class="px-4 py-2 font-medium">${item.action}</td>
          <td class="px-4 py-2 text-gray-700">${item.by}</td>
          `;
                historyTable.appendChild(row);
              });
            }

            // Hide the modal after a short delay
            setTimeout(() => {
              hideAttachDocumentModal();

              // Show success notification
              const notification = document.createElement('div');
              notification.className = 'fixed bottom-4 right-4 bg-green-100 text-green-800 px-4 py-3 rounded-lg shadow-lg z-50';
              notification.innerHTML = `
        <div class="flex items-center">
          <i class="ri-check-line mr-2 w-5 h-5 flex items-center justify-center"></i>
          <span>Document "${fileName}" successfully attached to complaint ${complaintId}.</span>
        </div>
        `;
              document.body.appendChild(notification);
              setTimeout(() => {
                notification.remove();
              }, 3000);
            }, 500);
          }
        }
      }, 100);
    });
    // Add drag and drop functionality for file upload
    const dropArea = document.querySelector('.border-dashed');
    const fileInput = document.getElementById('file-upload');

    // Prevent default behaviors for drag events
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
      dropArea.addEventListener(eventName, preventDefaults, false);
    });

    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }

    // Highlight drop area when dragging over it
    ['dragenter', 'dragover'].forEach(eventName => {
      dropArea.addEventListener(eventName, highlight, false);
    });

    // Remove highlight when leaving or after drop
    ['dragleave', 'drop'].forEach(eventName => {
      dropArea.addEventListener(eventName, unhighlight, false);
    });

    function highlight() {
      dropArea.classList.add('border-primary', 'bg-primary/5');
      // Add a subtle animation
      dropArea.style.transition = 'all 0.2s ease';
      dropArea.style.transform = 'scale(1.01)';
    }

    function unhighlight() {
      dropArea.classList.remove('border-primary', 'bg-primary/5');
      dropArea.style.transform = 'scale(1)';
    }

    // Handle the dropped files
    dropArea.addEventListener('drop', handleDrop, false);

    function handleDrop(e) {
      const dt = e.dataTransfer;
      const files = dt.files;

      // Update the file input with the dropped files
      fileInput.files = files;

      // Show file name and details
      if (files.length > 0) {
        const file = files[0];
        const fileName = file.name;
        const fileSize = formatFileSize(file.size);
        const fileType = file.type.split('/')[1] || 'unknown';

        const fileNameDisplay = document.createElement('div');
        fileNameDisplay.className = 'text-xs text-gray-700 mt-2 p-2 bg-gray-50 rounded-md';
        fileNameDisplay.innerHTML = `
      <div class="flex items-center">
        <i class="${getDocumentIconClass(fileType)} mr-2 text-gray-500"></i>
        <span class="font-medium">${fileName}</span>
      </div>
      <p class="mt-1 text-gray-500">${fileSize}</p>
    `;

        // Remove any existing file name display
        const existingFileNameDisplay = dropArea.querySelector('.text-xs.text-gray-700.mt-2');
        if (existingFileNameDisplay) {
          existingFileNameDisplay.remove();
        }

        dropArea.appendChild(fileNameDisplay);

        // Auto-select document type based on file extension if possible
        const extension = fileName.split('.').pop().toLowerCase();
        const documentTypeSelect = document.getElementById('documentType');

        for (let i = 0; i < documentTypeSelect.options.length; i++) {
          if (documentTypeSelect.options[i].value === extension) {
            documentTypeSelect.selectedIndex = i;
            break;
          }
        }

        // Suggest a title based on filename (without extension)
        const titleInput = document.getElementById('documentTitle');
        if (!titleInput.value) {
          const suggestedTitle = fileName.split('.').slice(0, -1).join('.');
          titleInput.value = suggestedTitle;
        }
      }
    }

    // Format file size to human-readable format
    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';

      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));

      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }
    document.querySelectorAll('.status-filter').forEach(button => {
      button.addEventListener('click', function () {
        document.querySelectorAll('.status-filter').forEach(btn => btn.classList.remove('active'));
        this.classList.add('active');
      });
    });
    // Add event listener for file input to show selected file name
    document.getElementById('file-upload').addEventListener('change', function (e) {
      const file = e.target.files[0];
      if (file) {
        const fileName = file.name;
        const fileSize = formatFileSize(file.size);
        const fileType = file.type.split('/')[1] || 'unknown';

        const fileNameDisplay = document.createElement('div');
        fileNameDisplay.className = 'text-xs text-gray-700 mt-2 p-2 bg-gray-50 rounded-md';
        fileNameDisplay.innerHTML = `
      <div class="flex items-center">
        <i class="${getDocumentIconClass(fileType)} mr-2 text-gray-500"></i>
        <span class="font-medium">${fileName}</span>
      </div>
      <p class="mt-1 text-gray-500">${fileSize}</p>
    `;

        // Remove any existing file name display
        const existingFileNameDisplay = this.parentElement.parentElement.querySelector('.text-xs.text-gray-700.mt-2');
        if (existingFileNameDisplay) {
          existingFileNameDisplay.remove();
        }

        this.parentElement.parentElement.appendChild(fileNameDisplay);

        // Auto-select document type based on file extension if possible
        const extension = fileName.split('.').pop().toLowerCase();
        const documentTypeSelect = document.getElementById('documentType');

        for (let i = 0; i < documentTypeSelect.options.length; i++) {
          if (documentTypeSelect.options[i].value === extension) {
            documentTypeSelect.selectedIndex = i;
            break;
          }
        }

        // Suggest a title based on filename (without extension)
        const titleInput = document.getElementById('documentTitle');
        if (!titleInput.value) {
          const suggestedTitle = fileName.split('.').slice(0, -1).join('.');
          titleInput.value = suggestedTitle;
        }
      }
    });
    // Variables for resolved cases pagination
    let resolvedCurrentPage = 1;
    let resolvedRowsPerPage = 10;
    let resolvedTotalPages = Math.ceil(mockComplaints.filter(complaint => complaint.status === "Resolved").length / resolvedRowsPerPage);
    // Variables for reappeal cases pagination
    let reappealCurrentPage = 1;
    let reappealRowsPerPage = 10;
    let reappealTotalPages = Math.ceil(mockReappealCases.length / reappealRowsPerPage);
    function showMyComplaints() {
      document.getElementById('pageTitle').textContent = 'My Complaints';
      document.getElementById('complaintsFilters').classList.remove('hidden');
      document.getElementById('complaintsTable').classList.remove('hidden');
      document.getElementById('resolvedCasesTable').classList.add('hidden');
      document.getElementById('reappealCasesTable').classList.add('hidden');
      document.getElementById('interviewListTable').classList.add('hidden');
      document.getElementById('complaintsListTable').classList.add('hidden');
      document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
      document.querySelector('.sidebar-link[onclick="showMyComplaints()"]').classList.add('active');
    }
    function showResolvedCases() {
      document.getElementById('pageTitle').textContent = 'Resolved Cases';
      document.getElementById('complaintsFilters').classList.add('hidden');
      document.getElementById('complaintsTable').classList.add('hidden');
      document.getElementById('resolvedCasesTable').classList.remove('hidden');
      document.getElementById('reappealCasesTable').classList.add('hidden');
      document.getElementById('complaintsListTable').classList.add('hidden');
      document.getElementById('interviewListTable').classList.add('hidden');
      document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
      document.querySelector('.sidebar-link[onclick="showResolvedCases()"]').classList.add('active');
      populateResolvedCasesTable();
    }
    function previousResolvedPage() {
      if (resolvedCurrentPage > 1) {
        resolvedCurrentPage--;
        populateResolvedCasesTable();
      }
    }
    function nextResolvedPage() {
      if (resolvedCurrentPage < resolvedTotalPages) {
        resolvedCurrentPage++;
        populateResolvedCasesTable();
      }
    }
    function updateResolvedRowsPerPage(value) {
      resolvedRowsPerPage = parseInt(value);
      resolvedTotalPages = Math.ceil(mockComplaints.filter(complaint => complaint.status === "Resolved").length / resolvedRowsPerPage);
      resolvedCurrentPage = 1;
      populateResolvedCasesTable();
    }
    function showReappealCases() {
      document.getElementById('pageTitle').textContent = 'Reappeal Cases';
      document.getElementById('complaintsFilters').classList.add('hidden');
      document.getElementById('complaintsTable').classList.add('hidden');
      document.getElementById('resolvedCasesTable').classList.add('hidden');
      document.getElementById('reappealCasesTable').classList.remove('hidden');
      document.getElementById('interviewListTable').classList.add('hidden');
      document.getElementById('complaintsListTable').classList.add('hidden');
      document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
      document.querySelector('.sidebar-link[onclick="showReappealCases()"]').classList.add('active');
      populateReappealCasesTable();
    }
    function showInterviewList() {
      document.getElementById('pageTitle').textContent = 'Interview List';
      document.getElementById('complaintsFilters').classList.add('hidden');
      document.getElementById('complaintsTable').classList.add('hidden');
      document.getElementById('resolvedCasesTable').classList.add('hidden');
      document.getElementById('reappealCasesTable').classList.add('hidden');
      document.getElementById('complaintsListTable').classList.add('hidden');
      document.getElementById('interviewListTable').classList.remove('hidden');
      document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
      document.querySelector('.sidebar-link[onclick="showInterviewList()"]').classList.add('active');
      populateInterviewListTable();
    }
    function showComplaintsList() {
      document.getElementById('pageTitle').textContent = 'Complaints List';
      document.getElementById('complaintsFilters').classList.add('hidden');
      document.getElementById('complaintsTable').classList.add('hidden');
      document.getElementById('resolvedCasesTable').classList.add('hidden');
      document.getElementById('reappealCasesTable').classList.add('hidden');
      document.getElementById('interviewListTable').classList.add('hidden');
      document.getElementById('complaintsListTable').classList.remove('hidden');
      document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
      document.querySelector('.sidebar-link[onclick="showComplaintsList()"]').classList.add('active');
      populateComplaintsListTable();
    }
    function populateReappealCasesTable() {
      const tbody = document.getElementById('reappealCasesTableBody');
      tbody.innerHTML = '';
      const startIndex = (reappealCurrentPage - 1) * reappealRowsPerPage;
      const endIndex = Math.min(startIndex + reappealRowsPerPage, mockReappealCases.length);
      for (let i = startIndex; i < endIndex; i++) {
        const reappeal = mockReappealCases[i];
        const tr = document.createElement('tr');
        tr.className = 'border-b hover:bg-gray-50';
        tr.innerHTML = `
<td class="px-6 py-4 font-medium">${reappeal.id}</td>
<td class="px-6 py-4">${reappeal.resolvedDate}</td>
<td class="px-6 py-4">
<button class="text-sm text-primary hover:underline flex items-center gap-1" onclick="showCaseSummaryModal('${reappeal.id}')">
<i class="ri-file-text-line w-4 h-4 flex items-center justify-center"></i>
View Summary
</button>
</td>
<td class="px-6 py-4">${reappeal.reappealDate}</td>
<td class="px-6 py-4">${reappeal.reasonForReappeal}</td>
<td class="px-6 py-4">
<div class="flex items-center gap-2">
<button class="p-1 text-gray-500 hover:text-gray-700" title="View" onclick="showViewModal('${reappeal.id}')">
<i class="ri-eye-line w-5 h-5 flex items-center justify-center"></i>
</button>
<button class="p-1 text-gray-500 hover:text-gray-700" title="Review" onclick="reviewReappeal('${reappeal.id}')">
<i class="ri-check-double-line w-5 h-5 flex items-center justify-center"></i>
</button>
</div>
</td>
`;
        tbody.appendChild(tr);
      }
      updateReappealPaginationControls();
    }
    function previousReappealPage() {
      if (reappealCurrentPage > 1) {
        reappealCurrentPage--;
        populateReappealCasesTable();
      }
    }
    function nextReappealPage() {
      if (reappealCurrentPage < reappealTotalPages) {
        reappealCurrentPage++;
        populateReappealCasesTable();
      }
    }
    function updateReappealRowsPerPage(value) {
      reappealRowsPerPage = parseInt(value);
      reappealTotalPages = Math.ceil(mockReappealCases.length / reappealRowsPerPage);
      reappealCurrentPage = 1;
      populateReappealCasesTable();
    }
    function updateReappealPaginationControls() {
      document.getElementById('reappealCurrentPage').textContent = reappealCurrentPage;
      const prevButton = document.getElementById('reappealPrevPageBtn');
      const nextButton = document.getElementById('reappealNextPageBtn');
      if (reappealCurrentPage <= 1) {
        prevButton.classList.remove('text-gray-700', 'hover:bg-gray-100');
        prevButton.classList.add('text-gray-400', 'cursor-not-allowed');
        prevButton.disabled = true;
      } else {
        prevButton.classList.remove('text-gray-400', 'cursor-not-allowed');
        prevButton.classList.add('text-gray-700', 'hover:bg-gray-100');
        prevButton.disabled = false;
      }
      if (reappealCurrentPage >= reappealTotalPages) {
        nextButton.classList.remove('text-gray-700', 'hover:bg-gray-100');
        nextButton.classList.add('text-gray-400', 'cursor-not-allowed');
        nextButton.disabled = true;
      } else {
        nextButton.classList.remove('text-gray-400', 'cursor-not-allowed');
        nextButton.classList.add('text-gray-700', 'hover:bg-gray-100');
        nextButton.disabled = false;
      }
    }
    // Variables for interview list pagination
    let interviewCurrentPage = 1;
    let interviewRowsPerPage = 10;
    let interviewTotalPages = Math.ceil(mockInterviews.length / interviewRowsPerPage);
    // Variables for my interviews pagination
    let myInterviewsCurrentPage = 1;
    let myInterviewsRowsPerPage = 10;
    let filteredMyInterviews = [...mockInterviews];
    let myInterviewsTotalPages = Math.ceil(filteredMyInterviews.length / myInterviewsRowsPerPage);
    function populateInterviewListTable() {
      const tbody = document.getElementById('interviewListTableBody');
      tbody.innerHTML = '';
      const startIndex = (interviewCurrentPage - 1) * interviewRowsPerPage;
      const endIndex = Math.min(startIndex + interviewRowsPerPage, mockInterviews.length);
      for (let i = startIndex; i < endIndex; i++) {
        const interview = mockInterviews[i];
        const tr = document.createElement('tr');
        tr.className = 'border-b hover:bg-gray-50';
        tr.innerHTML = `
<td class="px-6 py-4 font-medium">${interview.id}</td>
<td class="px-6 py-4">${interview.date} at ${interview.time}</td>
<td class="px-6 py-4">${interview.mode}</td>
<td class="px-6 py-4">
<span class="px-2 py-1 text-xs font-medium ${getInterviewStatusClass(interview.status)} rounded-full">
${interview.status}
</span>
</td>
<td class="px-6 py-4">
<div class="flex items-center gap-2">
<button class="p-1 text-gray-500 hover:text-gray-700" title="View Details" onclick="viewInterviewDetails('${interview.id}', '${interview.date}')">
<i class="ri-eye-line w-5 h-5 flex items-center justify-center"></i>
</button>
<button class="p-1 text-gray-500 hover:text-gray-700" title="Add Schedule" onclick="showScheduleInterviewModal()">
<i class="ri-calendar-add-line w-5 h-5 flex items-center justify-center"></i>
</button>
</div>
</td>
`;
        tbody.appendChild(tr);
      }
      updateInterviewPaginationControls();
    }
    function showMyInterviews() {
      document.getElementById('pageTitle').textContent = 'My Interviews';
      document.getElementById('complaintsFilters').classList.add('hidden');
      document.getElementById('complaintsTable').classList.add('hidden');
      document.getElementById('resolvedCasesTable').classList.add('hidden');
      document.getElementById('reappealCasesTable').classList.add('hidden');
      document.getElementById('interviewListTable').classList.add('hidden');
      document.getElementById('complaintsListTable').classList.add('hidden');
      document.getElementById('myInterviewsTable').classList.remove('hidden');
      document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
      document.querySelector('.sidebar-link[onclick="showMyInterviews()"]').classList.add('active');
      populateMyInterviewsTable();
    }
    function populateMyInterviewsTable() {
      const tbody = document.getElementById('myInterviewsTableBody');
      tbody.innerHTML = '';
      const startIndex = (myInterviewsCurrentPage - 1) * myInterviewsRowsPerPage;
      const endIndex = Math.min(startIndex + myInterviewsRowsPerPage, filteredMyInterviews.length);
      for (let i = startIndex; i < endIndex; i++) {
        const interview = filteredMyInterviews[i];
        const tr = document.createElement('tr');
        tr.className = 'border-b hover:bg-gray-50';
        tr.innerHTML = `
<td class="px-6 py-4">${interview.date} at ${interview.time}</td>
<td class="px-6 py-4 font-medium">${interview.id}</td>
<td class="px-6 py-4">${interview.participants}</td>
<td class="px-6 py-4">${interview.location}</td>
<td class="px-6 py-4">${interview.mode}</td>
<td class="px-6 py-4">
<span class="px-2 py-1 text-xs font-medium ${getInterviewStatusClass(interview.status)} rounded-full">
${interview.status}
</span>
</td>
<td class="px-6 py-4">
<div class="flex items-center gap-2">
<button class="p-1 text-gray-500 hover:text-gray-700" title="View Details" onclick="viewInterviewDetails('${interview.id}', '${interview.date}')">
<i class="ri-eye-line w-5 h-5 flex items-center justify-center"></i>
</button>
${interview.status === 'Scheduled' ? `
<button class="p-1 text-gray-500 hover:text-gray-700" title="Edit" onclick="showEditInterviewModal('${interview.id}', '${interview.date}')">
<i class="ri-edit-line w-5 h-5 flex items-center justify-center"></i>
</button>
<button class="p-1 text-gray-500 hover:text-gray-700" title="Cancel" onclick="showCancelInterviewModal('${interview.id}', '${interview.date}')">
<i class="ri-close-circle-line w-5 h-5 flex items-center justify-center"></i>
</button>
` : ''}
</div>
</td>
`;
        tbody.appendChild(tr);
      }
      updateMyInterviewsPaginationControls();
    }
    function filterMyInterviews() {
      const startDate = document.getElementById('startDateFilter').value;
      const endDate = document.getElementById('endDateFilter').value;
      const statusFilter = document.getElementById('interviewStatusFilter').value;
      const modeFilter = document.getElementById('interviewModeFilter').value;
      const searchInput = document.getElementById('interviewSearchInput').value.toLowerCase();
      filteredMyInterviews = mockInterviews.filter(interview => {
        return (
          (!startDate || interview.date >= startDate) &&
          (!endDate || interview.date <= endDate) &&
          (!statusFilter || interview.status === statusFilter) &&
          (!modeFilter || interview.mode === modeFilter) &&
          (searchInput === '' ||
            interview.id.toLowerCase().includes(searchInput) ||
            interview.participants.toLowerCase().includes(searchInput) ||
            interview.location.toLowerCase().includes(searchInput))
        );
      });
      myInterviewsTotalPages = Math.ceil(filteredMyInterviews.length / myInterviewsRowsPerPage);
      myInterviewsCurrentPage = 1;
      populateMyInterviewsTable();
    }
    function previousMyInterviewsPage() {
      if (myInterviewsCurrentPage > 1) {
        myInterviewsCurrentPage--;
        populateMyInterviewsTable();
      }
    }
    function nextMyInterviewsPage() {
      if (myInterviewsCurrentPage < myInterviewsTotalPages) {
        myInterviewsCurrentPage++;
        populateMyInterviewsTable();
      }
    }
    function updateMyInterviewsRowsPerPage(value) {
      myInterviewsRowsPerPage = parseInt(value);
      myInterviewsTotalPages = Math.ceil(filteredMyInterviews.length / myInterviewsRowsPerPage);
      myInterviewsCurrentPage = 1;
      populateMyInterviewsTable();
    }
    function updateMyInterviewsPaginationControls() {
      document.getElementById('myInterviewsCurrentPage').textContent = myInterviewsCurrentPage;
      const prevButton = document.getElementById('myInterviewsPrevPageBtn');
      const nextButton = document.getElementById('myInterviewsNextPageBtn');
      if (myInterviewsCurrentPage <= 1) {
        prevButton.classList.remove('text-gray-700', 'hover:bg-gray-100');
        prevButton.classList.add('text-gray-400', 'cursor-not-allowed');
        prevButton.disabled = true;
      } else {
        prevButton.classList.remove('text-gray-400', 'cursor-not-allowed');
        prevButton.classList.add('text-gray-700', 'hover:bg-gray-100');
        prevButton.disabled = false;
      }
      if (myInterviewsCurrentPage >= myInterviewsTotalPages) {
        nextButton.classList.remove('text-gray-700', 'hover:bg-gray-100');
        nextButton.classList.add('text-gray-400', 'cursor-not-allowed');
        nextButton.disabled = true;
      } else {
        nextButton.classList.remove('text-gray-400', 'cursor-not-allowed');
        nextButton.classList.add('text-gray-700', 'hover:bg-gray-100');
        nextButton.disabled = false;
      }
    }
    function getInterviewStatusClass(status) {
      const classes = {
        "Scheduled": "bg-yellow-100 text-yellow-800",
        "Attended": "bg-green-100 text-green-800",
        "Not Attended": "bg-red-100 text-red-800"
      };
      return classes[status] || "bg-gray-100 text-gray-800";
    }
    function previousInterviewPage() {
      if (interviewCurrentPage > 1) {
        interviewCurrentPage--;
        populateInterviewListTable();
      }
    }
    function nextInterviewPage() {
      if (interviewCurrentPage < interviewTotalPages) {
        interviewCurrentPage++;
        populateInterviewListTable();
      }
    }
    function updateInterviewRowsPerPage(value) {
      interviewRowsPerPage = parseInt(value);
      interviewTotalPages = Math.ceil(mockInterviews.length / interviewRowsPerPage);
      interviewCurrentPage = 1;
      populateInterviewListTable();
    }
    function updateInterviewPaginationControls() {
      document.getElementById('interviewCurrentPage').textContent = interviewCurrentPage;
      const prevButton = document.getElementById('interviewPrevPageBtn');
      const nextButton = document.getElementById('interviewNextPageBtn');
      if (interviewCurrentPage <= 1) {
        prevButton.classList.remove('text-gray-700', 'hover:bg-gray-100');
        prevButton.classList.add('text-gray-400', 'cursor-not-allowed');
        prevButton.disabled = true;
      } else {
        prevButton.classList.remove('text-gray-400', 'cursor-not-allowed');
        prevButton.classList.add('text-gray-700', 'hover:bg-gray-100');
        prevButton.disabled = false;
      }
      if (interviewCurrentPage >= interviewTotalPages) {
        nextButton.classList.remove('text-gray-700', 'hover:bg-gray-100');
        nextButton.classList.add('text-gray-400', 'cursor-not-allowed');
        nextButton.disabled = true;
      } else {
        nextButton.classList.remove('text-gray-400', 'cursor-not-allowed');
        nextButton.classList.add('text-gray-700', 'hover:bg-gray-100');
        nextButton.disabled = false;
      }
    }
    // Variables for complaints list pagination
    let complaintsListCurrentPage = 1;
    let complaintsListRowsPerPage = 10;
    let filteredComplaints = [...mockAllComplaints];
    let complaintsListTotalPages = Math.ceil(filteredComplaints.length / complaintsListRowsPerPage);
    function populateComplaintsListTable() {
      const tbody = document.getElementById('complaintsListTableBody');
      tbody.innerHTML = '';
      const startIndex = (complaintsListCurrentPage - 1) * complaintsListRowsPerPage;
      const endIndex = Math.min(startIndex + complaintsListRowsPerPage, filteredComplaints.length);
      for (let i = startIndex; i < endIndex; i++) {
        const complaint = filteredComplaints[i];
        const tr = document.createElement('tr');
        tr.className = 'border-b hover:bg-gray-50';
        tr.innerHTML = `
<td class="px-6 py-4 font-medium">${complaint.id}</td>
<td class="px-6 py-4">${complaint.date}</td>
<td class="px-6 py-4">${complaint.subject}</td>
<td class="px-6 py-4">${complaint.complainant}</td>
<td class="px-6 py-4">${complaint.department}</td>
<td class="px-6 py-4">
<span class="px-2 py-1 text-xs font-medium ${getStatusBadgeClass(complaint.status)} rounded-full">
${complaint.status}
</span>
</td>
<td class="px-6 py-4">
<div class="flex items-center gap-2">
<button class="p-1 text-gray-500 hover:text-gray-700" title="View" onclick="showViewModal('${complaint.id}')">
<i class="ri-eye-line w-5 h-5 flex items-center justify-center"></i>
</button>
<button class="p-1 text-gray-500 hover:text-gray-700" title="Assign" onclick="assignComplaint('${complaint.id}')">
<i class="ri-user-add-line w-5 h-5 flex items-center justify-center"></i>
</button>
</div>
</td>
`;
        tbody.appendChild(tr);
      }
      updateComplaintsListPaginationControls();
    }
    function filterComplaintsList() {
      const memberFilter = document.getElementById('memberFilter').value;
      const departmentFilter = document.getElementById('departmentFilter').value;
      const statusFilter = document.getElementById('statusFilterList').value;
      const searchInput = document.getElementById('searchInput').value.toLowerCase();
      filteredComplaints = mockAllComplaints.filter(complaint => {
        return (
          (memberFilter === '' || complaint.complainant === memberFilter) &&
          (departmentFilter === '' || complaint.department === departmentFilter) &&
          (statusFilter === '' || complaint.status === statusFilter) &&
          (searchInput === '' ||
            complaint.id.toLowerCase().includes(searchInput) ||
            complaint.subject.toLowerCase().includes(searchInput) ||
            complaint.description.toLowerCase().includes(searchInput))
        );
      });
      complaintsListTotalPages = Math.ceil(filteredComplaints.length / complaintsListRowsPerPage);
      complaintsListCurrentPage = 1;
      populateComplaintsListTable();
    }
    function previousComplaintsListPage() {
      if (complaintsListCurrentPage > 1) {
        complaintsListCurrentPage--;
        populateComplaintsListTable();
      }
    }
    function nextComplaintsListPage() {
      if (complaintsListCurrentPage < complaintsListTotalPages) {
        complaintsListCurrentPage++;
        populateComplaintsListTable();
      }
    }
    function updateComplaintsListRowsPerPage(value) {
      complaintsListRowsPerPage = parseInt(value);
      complaintsListTotalPages = Math.ceil(filteredComplaints.length / complaintsListRowsPerPage);
      complaintsListCurrentPage = 1;
      populateComplaintsListTable();
    }
    function updateComplaintsListPaginationControls() {
      document.getElementById('complaintsListCurrentPage').textContent = complaintsListCurrentPage;
      const prevButton = document.getElementById('complaintsListPrevPageBtn');
      const nextButton = document.getElementById('complaintsListNextPageBtn');
      if (complaintsListCurrentPage <= 1) {
        prevButton.classList.remove('text-gray-700', 'hover:bg-gray-100');
        prevButton.classList.add('text-gray-400', 'cursor-not-allowed');
        prevButton.disabled = true;
      } else {
        prevButton.classList.remove('text-gray-400', 'cursor-not-allowed');
        prevButton.classList.add('text-gray-700', 'hover:bg-gray-100');
        prevButton.disabled = false;
      }
      if (complaintsListCurrentPage >= complaintsListTotalPages) {
        nextButton.classList.remove('text-gray-700', 'hover:bg-gray-100');
        nextButton.classList.add('text-gray-400', 'cursor-not-allowed');
        nextButton.disabled = true;
      } else {
        nextButton.classList.remove('text-gray-400', 'cursor-not-allowed');
        nextButton.classList.add('text-gray-700', 'hover:bg-gray-100');
        nextButton.disabled = false;
      }
    }
    function assignComplaint(complaintId) {
      document.getElementById('assignComplaintId').textContent = complaintId;
      document.getElementById('complaintIdToAssign').value = complaintId;
      document.getElementById('assignComplaintModal').classList.remove('hidden');
    }
    function hideAssignComplaintModal() {
      document.getElementById('assignComplaintModal').classList.add('hidden');
    }
    function confirmAssignment() {
      const complaintId = document.getElementById('complaintIdToAssign').value;
      const selectedMembers = Array.from(document.getElementById('committeeMembers').selectedOptions).map(option => option.value);
      const primaryReviewer = document.getElementById('primaryReviewer').value;
      const comments = document.getElementById('assignmentComments').value;
      if (selectedMembers.length === 0) {
        document.getElementById('assignmentError').classList.remove('hidden');
        return;
      }
      document.getElementById('assignmentError').classList.add('hidden');
      hideAssignComplaintModal();
      const notification = document.createElement('div');
      notification.className = 'fixed bottom-4 right-4 bg-green-100 text-green-800 px-4 py-3 rounded-lg shadow-lg';
      notification.innerHTML = `
<div class="flex items-center">
<i class="ri-check-line mr-2"></i>
<span>Complaint ${complaintId} has been successfully assigned to committee members.</span>
</div>
`;
      document.body.appendChild(notification);
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }
    function viewInterviewDetails(complaintId, interviewDate) {
      const complaint = mockComplaints.find(c => c.id === complaintId);
      const interview = mockInterviews.find(i => i.id === complaintId && i.date === interviewDate);
      if (complaint && interview) {
        showViewModal(complaintId);
        // Scroll to the interview section
        setTimeout(() => {
          const interviewsSection = document.getElementById('relatedInterviews');
          if (interviewsSection) {
            interviewsSection.scrollIntoView({ behavior: 'smooth' });
          }
        }, 300);
      }
    }
    function reviewReappeal(complaintId) {
      const notification = document.createElement('div');
      notification.className = 'fixed bottom-4 right-4 bg-green-100 text-green-800 px-4 py-3 rounded-lg shadow-lg';
      notification.innerHTML = `
<div class="flex items-center">
<i class="ri-check-line mr-2"></i>
<span>Reappeal for ${complaintId} has been assigned for review.</span>
</div>
`;
      document.body.appendChild(notification);
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }
    document.querySelectorAll('.sidebar-link').forEach(link => {
      link.addEventListener('click', function (e) {
        e.preventDefault();
        document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
        this.classList.add('active');
      });
    });
    populateTable();
    populateComplaintsListTable();

    function viewComplaintDetails(complaintId) {
      window.location.href = `/view_complaint/${complaintId}`;
    }

    function downloadFile(filePath) {
      window.location.href = `/download_file/${encodeURIComponent(filePath)}`;
    }

    function updateStatus(complaintId) {
      const status = prompt('Enter new status (pending/in_progress/resolved/rejected):');
      if (status && ['pending', 'in_progress', 'resolved', 'rejected'].includes(status)) {
        const remarks = prompt('Enter remarks (optional):');

        fetch(`/update_complaint_status/${complaintId}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            status: status,
            remarks: remarks || ''
          }),
        })
          .then(response => response.json())
          .then(data => {
            if (data.success) {
              alert('Status updated successfully');
              location.reload();
            } else {
              alert('Error updating status: ' + data.message);
            }
          })
          .catch(error => {
            alert('Error updating status: ' + error);
          });
      } else if (status) {
        alert('Invalid status. Please enter one of: pending, in_progress, resolved, rejected');
      }
    }

    // Add status modal HTML
    const statusModalHTML = `
    <div id="statusModal" class="fixed inset-0 bg-gray-500 bg-opacity-75 hidden">
      <div class="fixed inset-0 z-10 overflow-y-auto">
        <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
          <div class="relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6">
            <div class="absolute right-0 top-0 hidden pr-4 pt-4 sm:block">
              <button type="button" class="rounded-md bg-white text-gray-400 hover:text-gray-500" onclick="closeStatusModal()">
                <span class="sr-only">Close</span>
                <i class="ri-close-line text-xl"></i>
              </button>
            </div>
            <div class="sm:flex sm:items-start">
              <div class="mt-3 text-center sm:mt-0 sm:text-left w-full">
                <h3 class="text-base font-semibold leading-6 text-gray-900">Update Complaint Status</h3>
                <form id="statusForm" onsubmit="submitStatusUpdate(event)" class="mt-4">
                  <div class="mb-4">
                    <label for="status" class="block text-sm font-medium text-gray-700">Status</label>
                    <select name="status" id="status" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm">
                      <option value="pending">Pending</option>
                      <option value="in_progress">In Progress</option>
                      <option value="resolved">Resolved</option>
                      <option value="rejected">Rejected</option>
                    </select>
                  </div>
                  <div class="mb-4">
                    <label for="remarks" class="block text-sm font-medium text-gray-700">Remarks</label>
                    <textarea name="remarks" id="remarks" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm"></textarea>
                  </div>
                  <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
                    <button type="submit" class="inline-flex w-full justify-center rounded-md bg-primary px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary/90 sm:ml-3 sm:w-auto">
                      Update
                    </button>
                    <button type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto" onclick="closeStatusModal()">
                      Cancel
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    `;

    // Add the modal to the document
    document.body.insertAdjacentHTML('beforeend', statusModalHTML);

    function closeStatusModal() {
      const statusModal = document.getElementById('statusModal');
      statusModal.classList.add('hidden');
    }
  </script>
</body>

</html>